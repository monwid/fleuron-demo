{\rtf1\ansi\ansicpg1252\cocoartf2822
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fnil\fcharset0 Menlo-Regular;}
{\colortbl;\red255\green255\blue255;\red109\green109\blue109;\red236\green241\blue247;\red251\green0\blue7;
\red0\green0\blue0;\red42\green42\blue42;\red107\green0\blue1;\red0\green0\blue255;\red77\green80\blue85;
\red9\green60\blue148;\red24\green112\blue43;\red19\green118\blue70;\red111\green14\blue195;\red164\green69\blue11;
\red14\green110\blue109;}
{\*\expandedcolortbl;;\cssrgb\c50196\c50196\c50196;\cssrgb\c94118\c95686\c97647;\cssrgb\c100000\c0\c0;
\cssrgb\c0\c0\c0;\cssrgb\c21961\c21961\c21961;\cssrgb\c50196\c0\c0;\cssrgb\c0\c0\c100000;\cssrgb\c37255\c38824\c40784;
\cssrgb\c1569\c31765\c64706;\cssrgb\c9412\c50196\c21961;\cssrgb\c3529\c52549\c34510;\cssrgb\c51765\c18824\c80784;\cssrgb\c70980\c34902\c3137;
\cssrgb\c0\c50196\c50196;}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\deftab720
\pard\pardeftab720\partightenfactor0

\f0\fs28 \cf2 \cb3 \expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 <!DOCTYPE\cf4 \strokec4  html\cf2 \strokec2 >\cf0 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 <\cf7 \strokec7 html\cf0 \strokec5  \cf4 \strokec4 lang\cf6 \strokec6 =\cf8 \strokec8 "en"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cf6 \cb3 \strokec6 <\cf7 \strokec7 head\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf0 \cb3     \cf6 \strokec6 <\cf7 \strokec7 meta\cf0 \strokec5  \cf4 \strokec4 charset\cf6 \strokec6 =\cf8 \strokec8 "UTF-8"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 <\cf7 \strokec7 meta\cf0 \strokec5  \cf4 \strokec4 name\cf6 \strokec6 =\cf8 \strokec8 "viewport"\cf0 \strokec5  \cf4 \strokec4 content\cf6 \strokec6 =\cf8 \strokec8 "width=device-width, initial-scale=1.0"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 <\cf7 \strokec7 title\cf6 \strokec6 >\cf0 \strokec5 Renovation Store Window\cf6 \strokec6 </\cf7 \strokec7 title\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 <\cf7 \strokec7 script\cf0 \strokec5  \cf4 \strokec4 src\cf6 \strokec6 =\cf8 \strokec8 "https://cdn.tailwindcss.com"\cf6 \strokec6 ></\cf7 \strokec7 script\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3     \cb1 \
\cb3     \cf6 \strokec6 <\cf7 \strokec7 style\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3         \cf9 \strokec9 /* --- GENERAL STYLES --- */\cf0 \cb1 \strokec5 \
\cb3         \cf7 \strokec7 body\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 background-color:\cf0 \strokec5  \cf10 \strokec10 #f8f9fa\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 font-family:\cf0 \strokec5  \cf11 \strokec11 "Helvetica Neue"\cf0 \strokec5 , \cf10 \strokec10 Helvetica\cf0 \strokec5 , \cf10 \strokec10 Arial\cf0 \strokec5 , \cf10 \strokec10 sans-serif\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 color:\cf0 \strokec5  \cf10 \strokec10 #1a1a1a\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\cb3         \cf7 \strokec7 .facade\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 background-color:\cf0 \strokec5  \cf10 \strokec10 #d1d5db\cf0 \strokec5 ;\cb1 \
\cb3             background-image:\cb1 \
\cb3                 linear-gradient(0deg, #ffffff4d 50%, #00000000 50%),\cb1 \
\cb3                 linear-gradient(90deg, #ffffff4d 50%, #00000000 50%);\cb1 \
\cb3             \cf4 \strokec4 background-size:\cf0 \strokec5  \cf12 \strokec12 4px\cf0 \strokec5  \cf12 \strokec12 4px\cf0 \strokec5 , \cf12 \strokec12 4px\cf0 \strokec5  \cf12 \strokec12 4px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 box-shadow:\cf0 \strokec5  \cf10 \strokec10 inset\cf0 \strokec5  \cf12 \strokec12 0\cf0 \strokec5  \cf12 \strokec12 0\cf0 \strokec5  \cf12 \strokec12 50px\cf0 \strokec5  \cf10 \strokec10 #0000001a\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 min-height:\cf0 \strokec5  \cf12 \strokec12 100vh\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 padding:\cf0 \strokec5  \cf12 \strokec12 40px\cf0 \strokec5  \cf12 \strokec12 16px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 display:\cf0 \strokec5  \cf10 \strokec10 flex\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 flex-direction:\cf0 \strokec5  \cf10 \strokec10 column\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 justify-content:\cf0 \strokec5  \cf10 \strokec10 center\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf7 \strokec7 .window-frame\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 background-color:\cf0 \strokec5  \cf10 \strokec10 #9ca3af\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 box-shadow:\cf0 \strokec5  \cf12 \strokec12 0\cf0 \strokec5  \cf12 \strokec12 10px\cf0 \strokec5  \cf12 \strokec12 25px\cf0 \strokec5  \cf12 \strokec12 -5px\cf0 \strokec5  \cf10 \strokec10 rgba(\cf12 \strokec12 0\cf0 \strokec5 , \cf12 \strokec12 0\cf0 \strokec5 , \cf12 \strokec12 0\cf0 \strokec5 , \cf12 \strokec12 0.1\cf10 \strokec10 )\cf0 \strokec5 , \cf12 \strokec12 0\cf0 \strokec5  \cf12 \strokec12 8px\cf0 \strokec5  \cf12 \strokec12 10px\cf0 \strokec5  \cf12 \strokec12 -6px\cf0 \strokec5  \cf10 \strokec10 rgba(\cf12 \strokec12 0\cf0 \strokec5 , \cf12 \strokec12 0\cf0 \strokec5 , \cf12 \strokec12 0\cf0 \strokec5 , \cf12 \strokec12 0.1\cf10 \strokec10 )\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf7 \strokec7 #window-container\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 background-color:\cf0 \strokec5  \cf10 \strokec10 #00000000\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 background-image:\cf0 \strokec5  \cf10 \strokec10 none\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 border-radius:\cf0 \strokec5  \cf12 \strokec12 0.5rem\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 position:\cf0 \strokec5  \cf10 \strokec10 relative\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 border-top:\cf0 \strokec5  \cf12 \strokec12 10px\cf0 \strokec5  \cf10 \strokec10 solid\cf0 \strokec5  \cf10 \strokec10 #cbd5e1\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 border-left:\cf0 \strokec5  \cf12 \strokec12 4px\cf0 \strokec5  \cf10 \strokec10 solid\cf0 \strokec5  \cf10 \strokec10 #cbd5e1\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 border-right:\cf0 \strokec5  \cf12 \strokec12 4px\cf0 \strokec5  \cf10 \strokec10 solid\cf0 \strokec5  \cf10 \strokec10 #cbd5e1\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 border-bottom:\cf0 \strokec5  \cf12 \strokec12 4px\cf0 \strokec5  \cf10 \strokec10 solid\cf0 \strokec5  \cf10 \strokec10 #cbd5e1\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\cb3         \cb1 \
\cb3         \cf7 \strokec7 #middle-pane\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 width:\cf0 \strokec5  \cf12 \strokec12 100%\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 height:\cf0 \strokec5  \cf12 \strokec12 100%\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 background-color:\cf0 \strokec5  \cf10 \strokec10 #00000000\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 position:\cf0 \strokec5  \cf10 \strokec10 relative\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 overflow:\cf0 \strokec5  \cf10 \strokec10 hidden\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 z-index:\cf0 \strokec5  \cf12 \strokec12 20\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf7 \strokec7 #clothCanvas\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 display:\cf0 \strokec5  \cf10 \strokec10 block\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 background-color:\cf0 \strokec5  \cf10 \strokec10 #00000000\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 cursor:\cf0 \strokec5  \cf10 \strokec10 grab\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 width:\cf0 \strokec5  \cf12 \strokec12 100%\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 height:\cf0 \strokec5  \cf12 \strokec12 100%\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 position:\cf0 \strokec5  \cf10 \strokec10 absolute\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 top:\cf0 \strokec5  \cf12 \strokec12 0\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 left:\cf0 \strokec5  \cf12 \strokec12 0\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 z-index:\cf0 \strokec5  \cf12 \strokec12 1\cf0 \strokec5 ; \cb1 \
\cb3         \}\cb1 \
\cb3         \cf7 \strokec7 #clothCanvas:active\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 cursor:\cf0 \strokec5  \cf10 \strokec10 grabbing\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf7 \strokec7 .upload-buttons-container\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 display:\cf0 \strokec5  \cf10 \strokec10 flex\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 justify-content:\cf0 \strokec5  \cf10 \strokec10 flex-start\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 gap:\cf0 \strokec5  \cf12 \strokec12 16px\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 padding:\cf0 \strokec5  \cf12 \strokec12 16px\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 flex-wrap:\cf0 \strokec5  \cf10 \strokec10 wrap\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 align-items:\cf0 \strokec5  \cf10 \strokec10 stretch\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 background-color:\cf0 \strokec5  \cf10 \strokec10 #ffffff\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 border-radius:\cf0 \strokec5  \cf12 \strokec12 12px\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 box-shadow:\cf0 \strokec5  \cf12 \strokec12 0\cf0 \strokec5  \cf12 \strokec12 4px\cf0 \strokec5  \cf12 \strokec12 20px\cf0 \strokec5  \cf10 \strokec10 rgba(\cf12 \strokec12 0\cf0 \strokec5 , \cf12 \strokec12 0\cf0 \strokec5 , \cf12 \strokec12 0\cf0 \strokec5 , \cf12 \strokec12 0.08\cf10 \strokec10 )\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 border:\cf0 \strokec5  \cf12 \strokec12 1px\cf0 \strokec5  \cf10 \strokec10 solid\cf0 \strokec5  \cf10 \strokec10 #e2e8f0\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf7 \strokec7 .upload-button\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 padding:\cf0 \strokec5  \cf12 \strokec12 8px\cf0 \strokec5  \cf12 \strokec12 16px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 background-color:\cf0 \strokec5  \cf10 \strokec10 #f1f5f9\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 color:\cf0 \strokec5  \cf10 \strokec10 #334155\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 border:\cf0 \strokec5  \cf12 \strokec12 1px\cf0 \strokec5  \cf10 \strokec10 solid\cf0 \strokec5  \cf10 \strokec10 #cbd5e1\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 border-radius:\cf0 \strokec5  \cf12 \strokec12 6px\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 cursor:\cf0 \strokec5  \cf10 \strokec10 pointer\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 font-size:\cf0 \strokec5  \cf12 \strokec12 0.875rem\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 transition:\cf0 \strokec5  \cf10 \strokec10 all\cf0 \strokec5  \cf12 \strokec12 0.2s\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 flex-grow:\cf0 \strokec5  \cf12 \strokec12 1\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 text-align:\cf0 \strokec5  \cf10 \strokec10 center\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 font-weight:\cf0 \strokec5  \cf12 \strokec12 600\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\cb3         \cf7 \strokec7 .upload-button:hover\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 background-color:\cf0 \strokec5  \cf10 \strokec10 #e2e8f0\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 border-color:\cf0 \strokec5  \cf10 \strokec10 #94a3b8\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf7 \strokec7 .rec-btn\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 padding:\cf0 \strokec5  \cf12 \strokec12 8px\cf0 \strokec5  \cf12 \strokec12 12px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 font-size:\cf0 \strokec5  \cf12 \strokec12 0.75rem\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 font-weight:\cf0 \strokec5  \cf10 \strokec10 bold\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 border-radius:\cf0 \strokec5  \cf12 \strokec12 4px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 transition:\cf0 \strokec5  \cf10 \strokec10 all\cf0 \strokec5  \cf12 \strokec12 0.2s\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 text-transform:\cf0 \strokec5  \cf10 \strokec10 uppercase\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 flex:\cf0 \strokec5  \cf12 \strokec12 1\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 font-family:\cf0 \strokec5  \cf11 \strokec11 "Helvetica Neue"\cf0 \strokec5 , \cf10 \strokec10 Helvetica\cf0 \strokec5 , \cf10 \strokec10 Arial\cf0 \strokec5 , \cf10 \strokec10 sans-serif\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\cb3         \cf7 \strokec7 .rec-btn:disabled\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 opacity:\cf0 \strokec5  \cf12 \strokec12 0.5\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 cursor:\cf0 \strokec5  \cf10 \strokec10 not-allowed\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\cb3         \cb1 \
\cb3         \cf7 \strokec7 .control-group\cf0 \strokec5  \{ \cb1 \
\cb3             \cf4 \strokec4 background-color:\cf0 \strokec5  \cf10 \strokec10 #ffffff\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 border:\cf0 \strokec5  \cf12 \strokec12 1px\cf0 \strokec5  \cf10 \strokec10 solid\cf0 \strokec5  \cf10 \strokec10 #e2e8f0\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 border-radius:\cf0 \strokec5  \cf12 \strokec12 8px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 padding:\cf0 \strokec5  \cf12 \strokec12 16px\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 flex-grow:\cf0 \strokec5  \cf12 \strokec12 1\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 max-width:\cf0 \strokec5  \cf10 \strokec10 none\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 min-width:\cf0 \strokec5  \cf12 \strokec12 250px\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 color:\cf0 \strokec5  \cf10 \strokec10 #334155\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 font-size:\cf0 \strokec5  \cf12 \strokec12 0.875rem\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 font-weight:\cf0 \strokec5  \cf12 \strokec12 500\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 display:\cf0 \strokec5  \cf10 \strokec10 flex\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 flex-direction:\cf0 \strokec5  \cf10 \strokec10 column\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 gap:\cf0 \strokec5  \cf12 \strokec12 10px\cf0 \strokec5 ; \cb1 \
\cb3         \}\cb1 \
\cb3         \cf7 \strokec7 .control-group-responsive\cf0 \strokec5  \{\cb1 \
\cb3              \cf4 \strokec4 width:\cf0 \strokec5  \cf12 \strokec12 100%\cf0 \strokec5 ; \cb1 \
\cb3         \}\cb1 \
\cb3         @\cf7 \strokec7 media\cf0 \strokec5  (\cf7 \strokec7 min-width:\cf0 \strokec5  768\cf7 \strokec7 px\cf0 \strokec5 ) \{\cb1 \
\cb3             .control-group-responsive \{\cb1 \
\cb3                 \cf4 \strokec4 width:\cf0 \strokec5  \cf10 \strokec10 calc(\cf12 \strokec12 50%\cf0 \strokec5  - \cf12 \strokec12 8px\cf10 \strokec10 )\cf0 \strokec5 ; \cb1 \
\cb3             \}\cb1 \
\cb3         \}\cb1 \
\cb3         @\cf7 \strokec7 media\cf0 \strokec5  (\cf7 \strokec7 min-width:\cf0 \strokec5  1280\cf7 \strokec7 px\cf0 \strokec5 ) \{ \cb1 \
\cb3             .control-group-responsive \{\cb1 \
\cb3                 \cf4 \strokec4 width:\cf0 \strokec5  \cf10 \strokec10 calc(\cf12 \strokec12 25%\cf0 \strokec5  - \cf12 \strokec12 12px\cf10 \strokec10 )\cf0 \strokec5 ; \cb1 \
\cb3             \}\cb1 \
\cb3         \}\cb1 \
\cb3         \cb1 \
\cb3         \cf7 \strokec7 .control-group\cf0 \strokec5  \cf7 \strokec7 .text-gray-900\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 color:\cf0 \strokec5  \cf10 \strokec10 #0f172a\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 font-size:\cf0 \strokec5  \cf12 \strokec12 1.125rem\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 border-bottom:\cf0 \strokec5  \cf12 \strokec12 1px\cf0 \strokec5  \cf10 \strokec10 solid\cf0 \strokec5  \cf10 \strokec10 #f1f5f9\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 padding-bottom:\cf0 \strokec5  \cf12 \strokec12 8px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 margin-bottom:\cf0 \strokec5  \cf12 \strokec12 4px\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf7 \strokec7 #matrixInput\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 background-color:\cf0 \strokec5  \cf10 \strokec10 #ffffff\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 color:\cf0 \strokec5  \cf10 \strokec10 #1e293b\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 padding:\cf0 \strokec5  \cf12 \strokec12 8px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 border-radius:\cf0 \strokec5  \cf12 \strokec12 4px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 font-size:\cf0 \strokec5  \cf12 \strokec12 0.875rem\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 outline:\cf0 \strokec5  \cf10 \strokec10 none\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 flex-grow:\cf0 \strokec5  \cf12 \strokec12 1\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 min-height:\cf0 \strokec5  \cf12 \strokec12 80px\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 resize:\cf0 \strokec5  \cf10 \strokec10 vertical\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 line-height:\cf0 \strokec5  \cf12 \strokec12 1.25\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 font-family:\cf0 \strokec5  \cf10 \strokec10 ui-monospace\cf0 \strokec5 , \cf10 \strokec10 SFMono-Regular\cf0 \strokec5 , \cf10 \strokec10 Menlo\cf0 \strokec5 , \cf10 \strokec10 Monaco\cf0 \strokec5 , \cf10 \strokec10 Consolas\cf0 \strokec5 , \cf10 \strokec10 monospace\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 border:\cf0 \strokec5  \cf12 \strokec12 1px\cf0 \strokec5  \cf10 \strokec10 solid\cf0 \strokec5  \cf10 \strokec10 #cbd5e1\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\cb3         \cf7 \strokec7 #matrixInput:focus\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 border-color:\cf0 \strokec5  \cf10 \strokec10 #3b82f6\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 ring:\cf0 \strokec5  \cf12 \strokec12 2px\cf0 \strokec5  \cf10 \strokec10 solid\cf0 \strokec5  \cf10 \strokec10 #3b82f633\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf7 \strokec7 #generateMatrixButton\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 transition:\cf0 \strokec5  \cf10 \strokec10 all\cf0 \strokec5  \cf12 \strokec12 0.2s\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 padding:\cf0 \strokec5  \cf12 \strokec12 8px\cf0 \strokec5  \cf12 \strokec12 12px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 font-size:\cf0 \strokec5  \cf12 \strokec12 0.875rem\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 font-weight:\cf0 \strokec5  \cf12 \strokec12 600\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 cursor:\cf0 \strokec5  \cf10 \strokec10 pointer\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 background-color:\cf0 \strokec5  \cf10 \strokec10 #0f172a\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 color:\cf0 \strokec5  \cf10 \strokec10 #ffffff\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 border-radius:\cf0 \strokec5  \cf12 \strokec12 4px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 box-shadow:\cf0 \strokec5  \cf12 \strokec12 0\cf0 \strokec5  \cf12 \strokec12 1px\cf0 \strokec5  \cf12 \strokec12 3px\cf0 \strokec5  \cf10 \strokec10 rgba(\cf12 \strokec12 0\cf0 \strokec5 , \cf12 \strokec12 0\cf0 \strokec5 , \cf12 \strokec12 0\cf0 \strokec5 , \cf12 \strokec12 0.1\cf10 \strokec10 )\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 font-family:\cf0 \strokec5  \cf11 \strokec11 "Helvetica Neue"\cf0 \strokec5 , \cf10 \strokec10 Helvetica\cf0 \strokec5 , \cf10 \strokec10 Arial\cf0 \strokec5 , \cf10 \strokec10 sans-serif\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\cb3         \cf7 \strokec7 #generateMatrixButton:hover\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 background-color:\cf0 \strokec5  \cf10 \strokec10 #1e293b\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\cb3         \cb1 \
\cb3         \cf7 \strokec7 .color-input-group\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 display:\cf0 \strokec5  \cf10 \strokec10 flex\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 align-items:\cf0 \strokec5  \cf10 \strokec10 center\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 gap:\cf0 \strokec5  \cf12 \strokec12 8px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 padding:\cf0 \strokec5  \cf12 \strokec12 4px\cf0 \strokec5  \cf12 \strokec12 0\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 justify-content:\cf0 \strokec5  \cf10 \strokec10 space-between\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\cb3         \cb1 \
\cb3         \cf7 \strokec7 .color-input-field\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 appearance:\cf0 \strokec5  \cf10 \strokec10 none\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 -webkit-appearance:\cf0 \strokec5  \cf10 \strokec10 none\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 border:\cf0 \strokec5  \cf12 \strokec12 1px\cf0 \strokec5  \cf10 \strokec10 solid\cf0 \strokec5  \cf10 \strokec10 #cbd5e1\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 width:\cf0 \strokec5  \cf12 \strokec12 32px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 height:\cf0 \strokec5  \cf12 \strokec12 32px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 padding:\cf0 \strokec5  \cf12 \strokec12 0\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 background:\cf0 \strokec5  \cf10 \strokec10 none\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 cursor:\cf0 \strokec5  \cf10 \strokec10 pointer\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 border-radius:\cf0 \strokec5  \cf12 \strokec12 6px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 overflow:\cf0 \strokec5  \cf10 \strokec10 hidden\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\cb3         \cb1 \
\cb3         \cf7 \strokec7 .range-control\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 display:\cf0 \strokec5  \cf10 \strokec10 flex\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 align-items:\cf0 \strokec5  \cf10 \strokec10 center\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 gap:\cf0 \strokec5  \cf12 \strokec12 8px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 justify-content:\cf0 \strokec5  \cf10 \strokec10 space-between\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\cb3         \cf7 \strokec7 .range-control\cf0 \strokec5  \cf7 \strokec7 input\cf0 \strokec5 [\cf10 \strokec10 type\cf0 \strokec5 =\cf11 \strokec11 "range"\cf0 \strokec5 ] \{\cb1 \
\cb3             \cf4 \strokec4 flex-grow:\cf0 \strokec5  \cf12 \strokec12 1\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 margin:\cf0 \strokec5  \cf12 \strokec12 0\cf0 \strokec5  \cf12 \strokec12 8px\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\cb3         \cf7 \strokec7 .density-control\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 display:\cf0 \strokec5  \cf10 \strokec10 flex\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 gap:\cf0 \strokec5  \cf12 \strokec12 8px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 align-items:\cf0 \strokec5  \cf10 \strokec10 center\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 justify-content:\cf0 \strokec5  \cf10 \strokec10 space-between\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\cb3         \cf7 \strokec7 .density-control\cf0 \strokec5  \cf7 \strokec7 input\cf0 \strokec5 [\cf10 \strokec10 type\cf0 \strokec5 =\cf11 \strokec11 "number"\cf0 \strokec5 ],\cb1 \
\cb3         \cf7 \strokec7 .density-control\cf0 \strokec5  \cf7 \strokec7 select\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 width:\cf0 \strokec5  \cf12 \strokec12 80px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 text-align:\cf0 \strokec5  \cf10 \strokec10 center\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 padding:\cf0 \strokec5  \cf12 \strokec12 4px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 border-radius:\cf0 \strokec5  \cf12 \strokec12 4px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 background-color:\cf0 \strokec5  \cf10 \strokec10 #ffffff\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 color:\cf0 \strokec5  \cf10 \strokec10 #1e293b\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 border:\cf0 \strokec5  \cf12 \strokec12 1px\cf0 \strokec5  \cf10 \strokec10 solid\cf0 \strokec5  \cf10 \strokec10 #cbd5e1\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\cb3         \cb1 \
\cb3         \cf7 \strokec7 .section-separator\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 border-top:\cf0 \strokec5  \cf12 \strokec12 1px\cf0 \strokec5  \cf10 \strokec10 solid\cf0 \strokec5  \cf10 \strokec10 #f1f5f9\cf0 \strokec5 ; \cb1 \
\cb3             \cf4 \strokec4 padding-top:\cf0 \strokec5  \cf12 \strokec12 8px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 margin-top:\cf0 \strokec5  \cf12 \strokec12 8px\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\cb3         \cb1 \
\cb3         \cf7 \strokec7 .sub-label\cf0 \strokec5  \{\cb1 \
\cb3             \cf4 \strokec4 font-weight:\cf0 \strokec5  \cf12 \strokec12 600\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 font-size:\cf0 \strokec5  \cf12 \strokec12 0.9rem\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 margin-bottom:\cf0 \strokec5  \cf12 \strokec12 4px\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 display:\cf0 \strokec5  \cf10 \strokec10 block\cf0 \strokec5 ;\cb1 \
\cb3             \cf4 \strokec4 color:\cf0 \strokec5  \cf10 \strokec10 #64748b\cf0 \strokec5 ; \cb1 \
\cb3         \}\cb1 \
\cb3     \cf6 \strokec6 </\cf7 \strokec7 style\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 </\cf7 \strokec7 head\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cf6 \cb3 \strokec6 <\cf7 \strokec7 body\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "bg-gray-100"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\
\pard\pardeftab720\partightenfactor0
\cf0 \cb3     \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "facade"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3         \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "max-w-6xl w-full mx-auto rounded-xl shadow-2xl"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "window-container"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "window-frame h-[75vh] max-h-[700px] border-gray-700 rounded-xl overflow-hidden"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "middle-pane"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 canvas\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "clothCanvas"\cf6 \strokec6 ></\cf7 \strokec7 canvas\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3         \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3         \cb1 \
\cb3         \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "mt-6 h-auto max-w-6xl w-full mx-auto upload-buttons-container"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3             \cf9 \strokec9 <!-- Group 1: PATTERN & STRUCTURE -->\cf0 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "control-group control-group-responsive"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 label\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "font-bold mb-1 block text-lg text-gray-900"\cf6 \strokec6 >\cf0 \strokec5 Pattern & Structure\cf6 \strokec6 </\cf7 \strokec7 label\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cb1 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "flex flex-col gap-2 mb-2"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 label\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "sub-label"\cf6 \strokec6 >\cf0 \strokec5 Video Recording (Canvas Only)\cf6 \strokec6 </\cf7 \strokec7 label\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "flex gap-2"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                         \cf6 \strokec6 <\cf7 \strokec7 button\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "recordStartButton"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "rec-btn bg-red-600 hover:bg-red-500 text-white"\cf6 \strokec6 >\cf0 \strokec5 Record Start\cf6 \strokec6 </\cf7 \strokec7 button\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                         \cf6 \strokec6 <\cf7 \strokec7 button\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "recordStopButton"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "rec-btn bg-slate-600 hover:bg-slate-500 text-white"\cf0 \strokec5  \cf4 \strokec4 disabled\cf6 \strokec6 >\cf0 \strokec5 Stop & Save\cf6 \strokec6 </\cf7 \strokec7 button\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "flex flex-col gap-2 section-separator pt-2"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 label\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "sub-label"\cf6 \strokec6 >\cf0 \strokec5 Pattern Matrix (1=Large, 0=Small)\cf6 \strokec6 </\cf7 \strokec7 label\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 textarea\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "matrixInput"\cf0 \strokec5  \cf4 \strokec4 placeholder\cf6 \strokec6 =\cf8 \strokec8 "1s and 0s (Max 40x40)"\cf0 \strokec5  \cf4 \strokec4 rows\cf6 \strokec6 =\cf8 \strokec8 "5"\cf6 \strokec6 >\cf0 \strokec5 11111\cb1 \
\cb3 11111\cb1 \
\cb3 11111\cb1 \
\cb3 11111\cb1 \
\cb3 11111\cf6 \strokec6 </\cf7 \strokec7 textarea\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 button\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "generateMatrixButton"\cf6 \strokec6 >\cf0 \strokec5 Apply Pattern\cf6 \strokec6 </\cf7 \strokec7 button\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "density-control section-separator"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 label\cf0 \strokec5  \cf4 \strokec4 for\cf6 \strokec6 =\cf8 \strokec8 "pointsDownInput"\cf6 \strokec6 >\cf0 \strokec5 Vertical Rows (Depth):\cf6 \strokec6 </\cf7 \strokec7 label\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 input\cf0 \strokec5  \cf4 \strokec4 type\cf6 \strokec6 =\cf8 \strokec8 "number"\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "pointsDownInput"\cf0 \strokec5  \cf4 \strokec4 min\cf6 \strokec6 =\cf8 \strokec8 "20"\cf0 \strokec5  \cf4 \strokec4 max\cf6 \strokec6 =\cf8 \strokec8 "200"\cf0 \strokec5  \cf4 \strokec4 step\cf6 \strokec6 =\cf8 \strokec8 "10"\cf0 \strokec5  \cf4 \strokec4 value\cf6 \strokec6 =\cf8 \strokec8 "50"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "density-input"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "range-control"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 label\cf0 \strokec5  \cf4 \strokec4 for\cf6 \strokec6 =\cf8 \strokec8 "horizontalGapScale"\cf6 \strokec6 >\cf0 \strokec5 Horizontal Compression:\cf6 \strokec6 </\cf7 \strokec7 label\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 input\cf0 \strokec5  \cf4 \strokec4 type\cf6 \strokec6 =\cf8 \strokec8 "range"\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "horizontalGapScale"\cf0 \strokec5  \cf4 \strokec4 min\cf6 \strokec6 =\cf8 \strokec8 "0.3"\cf0 \strokec5  \cf4 \strokec4 max\cf6 \strokec6 =\cf8 \strokec8 "1.0"\cf0 \strokec5  \cf4 \strokec4 step\cf6 \strokec6 =\cf8 \strokec8 "0.05"\cf0 \strokec5  \cf4 \strokec4 value\cf6 \strokec6 =\cf8 \strokec8 "1.0"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "range-slider"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 span\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "horizontalGapValue"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "w-10 text-right"\cf6 \strokec6 >\cf0 \strokec5 1.0x\cf6 \strokec6 </\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "density-control"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 label\cf0 \strokec5  \cf4 \strokec4 for\cf6 \strokec6 =\cf8 \strokec8 "pointsAcrossInput"\cf6 \strokec6 >\cf0 \strokec5 Vertical Strings (Width):\cf6 \strokec6 </\cf7 \strokec7 label\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 input\cf0 \strokec5  \cf4 \strokec4 type\cf6 \strokec6 =\cf8 \strokec8 "number"\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "pointsAcrossInput"\cf0 \strokec5  \cf4 \strokec4 min\cf6 \strokec6 =\cf8 \strokec8 "50"\cf0 \strokec5  \cf4 \strokec4 max\cf6 \strokec6 =\cf8 \strokec8 "200"\cf0 \strokec5  \cf4 \strokec4 step\cf6 \strokec6 =\cf8 \strokec8 "10"\cf0 \strokec5  \cf4 \strokec4 value\cf6 \strokec6 =\cf8 \strokec8 "100"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "density-input"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\
\cb3             \cf9 \strokec9 <!-- Group 2: BEAD VISUALS -->\cf0 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "control-group control-group-responsive"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 label\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "font-bold mb-1 block text-lg text-gray-900"\cf6 \strokec6 >\cf0 \strokec5 Bead Visuals\cf6 \strokec6 </\cf7 \strokec7 label\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 label\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "sub-label"\cf6 \strokec6 >\cf0 \strokec5 Color Palette\cf6 \strokec6 </\cf7 \strokec7 label\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "grid grid-cols-2 gap-2"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "color-input-group"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                         \cf6 \strokec6 <\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \strokec5 Color 1:\cf6 \strokec6 </\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                         \cf6 \strokec6 <\cf7 \strokec7 input\cf0 \strokec5  \cf4 \strokec4 type\cf6 \strokec6 =\cf8 \strokec8 "color"\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "primaryBeadColor1"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "color-input-field"\cf0 \strokec5  \cf4 \strokec4 value\cf6 \strokec6 =\cf8 \strokec8 "#F2DCEA"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "color-input-group"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                         \cf6 \strokec6 <\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \strokec5 Color 2:\cf6 \strokec6 </\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                         \cf6 \strokec6 <\cf7 \strokec7 input\cf0 \strokec5  \cf4 \strokec4 type\cf6 \strokec6 =\cf8 \strokec8 "color"\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "primaryBeadColor2"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "color-input-field"\cf0 \strokec5  \cf4 \strokec4 value\cf6 \strokec6 =\cf8 \strokec8 "#D9F2F6"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "color-input-group"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                         \cf6 \strokec6 <\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \strokec5 Color 3:\cf6 \strokec6 </\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                         \cf6 \strokec6 <\cf7 \strokec7 input\cf0 \strokec5  \cf4 \strokec4 type\cf6 \strokec6 =\cf8 \strokec8 "color"\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "primaryBeadColor3"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "color-input-field"\cf0 \strokec5  \cf4 \strokec4 value\cf6 \strokec6 =\cf8 \strokec8 "#FCFCDC"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "color-input-group"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                         \cf6 \strokec6 <\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \strokec5 Color 4:\cf6 \strokec6 </\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                         \cf6 \strokec6 <\cf7 \strokec7 input\cf0 \strokec5  \cf4 \strokec4 type\cf6 \strokec6 =\cf8 \strokec8 "color"\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "primaryBeadColor4"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "color-input-field"\cf0 \strokec5  \cf4 \strokec4 value\cf6 \strokec6 =\cf8 \strokec8 "#EBFFBF"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cb1 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 label\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "sub-label section-separator"\cf6 \strokec6 >\cf0 \strokec5 Bead Scaling\cf6 \strokec6 </\cf7 \strokec7 label\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "range-control"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 label\cf0 \strokec5  \cf4 \strokec4 for\cf6 \strokec6 =\cf8 \strokec8 "smallBeadScale"\cf6 \strokec6 >\cf0 \strokec5 Small Beads (0s):\cf6 \strokec6 </\cf7 \strokec7 label\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 input\cf0 \strokec5  \cf4 \strokec4 type\cf6 \strokec6 =\cf8 \strokec8 "range"\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "smallBeadScale"\cf0 \strokec5  \cf4 \strokec4 min\cf6 \strokec6 =\cf8 \strokec8 "0.5"\cf0 \strokec5  \cf4 \strokec4 max\cf6 \strokec6 =\cf8 \strokec8 "3.0"\cf0 \strokec5  \cf4 \strokec4 step\cf6 \strokec6 =\cf8 \strokec8 "0.1"\cf0 \strokec5  \cf4 \strokec4 value\cf6 \strokec6 =\cf8 \strokec8 "0.5"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "range-slider"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 span\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "smallBeadScaleValue"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "w-10 text-right"\cf6 \strokec6 >\cf0 \strokec5 0.5x\cf6 \strokec6 </\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "range-control"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 label\cf0 \strokec5  \cf4 \strokec4 for\cf6 \strokec6 =\cf8 \strokec8 "largeBeadScale"\cf6 \strokec6 >\cf0 \strokec5 Large Beads (1s):\cf6 \strokec6 </\cf7 \strokec7 label\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 input\cf0 \strokec5  \cf4 \strokec4 type\cf6 \strokec6 =\cf8 \strokec8 "range"\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "largeBeadScale"\cf0 \strokec5  \cf4 \strokec4 min\cf6 \strokec6 =\cf8 \strokec8 "0.5"\cf0 \strokec5  \cf4 \strokec4 max\cf6 \strokec6 =\cf8 \strokec8 "3.0"\cf0 \strokec5  \cf4 \strokec4 step\cf6 \strokec6 =\cf8 \strokec8 "0.1"\cf0 \strokec5  \cf4 \strokec4 value\cf6 \strokec6 =\cf8 \strokec8 "0.9"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "range-slider"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 span\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "largeBeadScaleValue"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "w-10 text-right"\cf6 \strokec6 >\cf0 \strokec5 0.9x\cf6 \strokec6 </\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "range-control"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 label\cf0 \strokec5  \cf4 \strokec4 for\cf6 \strokec6 =\cf8 \strokec8 "scallopedBeadScale"\cf6 \strokec6 >\cf0 \strokec5 Scalloped Beads:\cf6 \strokec6 </\cf7 \strokec7 label\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 input\cf0 \strokec5  \cf4 \strokec4 type\cf6 \strokec6 =\cf8 \strokec8 "range"\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "scallopedBeadScale"\cf0 \strokec5  \cf4 \strokec4 min\cf6 \strokec6 =\cf8 \strokec8 "0.5"\cf0 \strokec5  \cf4 \strokec4 max\cf6 \strokec6 =\cf8 \strokec8 "3.0"\cf0 \strokec5  \cf4 \strokec4 step\cf6 \strokec6 =\cf8 \strokec8 "0.1"\cf0 \strokec5  \cf4 \strokec4 value\cf6 \strokec6 =\cf8 \strokec8 "0.5"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "range-slider"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 span\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "scallopedBeadScaleValue"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "w-10 text-right"\cf6 \strokec6 >\cf0 \strokec5 0.5x\cf6 \strokec6 </\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 label\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "sub-label section-separator"\cf6 \strokec6 >\cf0 \strokec5 Scallop Curvature\cf6 \strokec6 </\cf7 \strokec7 label\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "range-control"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 label\cf0 \strokec5  \cf4 \strokec4 for\cf6 \strokec6 =\cf8 \strokec8 "scallopDepthInput"\cf6 \strokec6 >\cf0 \strokec5 Max Drop (px):\cf6 \strokec6 </\cf7 \strokec7 label\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 input\cf0 \strokec5  \cf4 \strokec4 type\cf6 \strokec6 =\cf8 \strokec8 "range"\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "scallopDepthInput"\cf0 \strokec5  \cf4 \strokec4 min\cf6 \strokec6 =\cf8 \strokec8 "10"\cf0 \strokec5  \cf4 \strokec4 max\cf6 \strokec6 =\cf8 \strokec8 "150"\cf0 \strokec5  \cf4 \strokec4 step\cf6 \strokec6 =\cf8 \strokec8 "5"\cf0 \strokec5  \cf4 \strokec4 value\cf6 \strokec6 =\cf8 \strokec8 "150"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "range-slider"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 span\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "scallopDepthValue"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "w-10 text-right"\cf6 \strokec6 >\cf0 \strokec5 150 px\cf6 \strokec6 </\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "color-input-group section-separator"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \strokec5 Wire Color:\cf6 \strokec6 </\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 input\cf0 \strokec5  \cf4 \strokec4 type\cf6 \strokec6 =\cf8 \strokec8 "color"\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "unbeadedDotColor"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "color-input-field"\cf0 \strokec5  \cf4 \strokec4 value\cf6 \strokec6 =\cf8 \strokec8 "#A0A0A0"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 label\cf0 \strokec5  \cf4 \strokec4 for\cf6 \strokec6 =\cf8 \strokec8 "beadTextureUpload"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "upload-button"\cf6 \strokec6 >\cf0 \strokec5 Upload Custom Bead Texture\cf6 \strokec6 </\cf7 \strokec7 label\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\
\cb3             \cf9 \strokec9 <!-- Group 3: BACKGROUND & TOOLS -->\cf0 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "control-group control-group-responsive"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 label\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "font-bold mb-1 block text-lg text-gray-900"\cf6 \strokec6 >\cf0 \strokec5 Background & Tools\cf6 \strokec6 </\cf7 \strokec7 label\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 label\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "sub-label"\cf6 \strokec6 >\cf0 \strokec5 Window Background\cf6 \strokec6 </\cf7 \strokec7 label\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "color-controls"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "color-input-group"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                         \cf6 \strokec6 <\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \strokec5 Color Start:\cf6 \strokec6 </\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                         \cf6 \strokec6 <\cf7 \strokec7 input\cf0 \strokec5  \cf4 \strokec4 type\cf6 \strokec6 =\cf8 \strokec8 "color"\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "bgColor"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "color-input-field"\cf0 \strokec5  \cf4 \strokec4 value\cf6 \strokec6 =\cf8 \strokec8 "#EBEBEB"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "color-input-group"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                         \cf6 \strokec6 <\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \strokec5 Color End:\cf6 \strokec6 </\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                         \cf6 \strokec6 <\cf7 \strokec7 input\cf0 \strokec5  \cf4 \strokec4 type\cf6 \strokec6 =\cf8 \strokec8 "color"\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "gradientColor"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "color-input-field"\cf0 \strokec5  \cf4 \strokec4 value\cf6 \strokec6 =\cf8 \strokec8 "#5C5C5C"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "density-control"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 label\cf0 \strokec5  \cf4 \strokec4 for\cf6 \strokec6 =\cf8 \strokec8 "gradientToggle"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "flex items-center gap-2 cursor-pointer"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                         \cf6 \strokec6 <\cf7 \strokec7 input\cf0 \strokec5  \cf4 \strokec4 type\cf6 \strokec6 =\cf8 \strokec8 "checkbox"\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "gradientToggle"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded"\cf0 \strokec5  \cf4 \strokec4 checked\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                         \cf6 \strokec6 <\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \strokec5 Use Gradient\cf6 \strokec6 </\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 </\cf7 \strokec7 label\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 span\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "text-xs text-gray-400"\cf6 \strokec6 >\cf0 \strokec5 Angle: \cf6 \strokec6 <\cf7 \strokec7 span\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "gradientAngleValue"\cf6 \strokec6 >\cf0 \strokec5 180\'b0\cf6 \strokec6 </\cf7 \strokec7 span\cf6 \strokec6 ></\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "range-control"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 label\cf0 \strokec5  \cf4 \strokec4 for\cf6 \strokec6 =\cf8 \strokec8 "gradientAngle"\cf6 \strokec6 >\cf0 \strokec5 Gradient Angle:\cf6 \strokec6 </\cf7 \strokec7 label\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 input\cf0 \strokec5  \cf4 \strokec4 type\cf6 \strokec6 =\cf8 \strokec8 "range"\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "gradientAngle"\cf0 \strokec5  \cf4 \strokec4 min\cf6 \strokec6 =\cf8 \strokec8 "0"\cf0 \strokec5  \cf4 \strokec4 max\cf6 \strokec6 =\cf8 \strokec8 "360"\cf0 \strokec5  \cf4 \strokec4 step\cf6 \strokec6 =\cf8 \strokec8 "5"\cf0 \strokec5  \cf4 \strokec4 value\cf6 \strokec6 =\cf8 \strokec8 "180"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "range-slider"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             \cf9 \strokec9 <!-- Group 4: ANIMATION -->\cf0 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "control-group control-group-responsive"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 label\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "font-bold mb-1 block text-lg text-gray-900"\cf6 \strokec6 >\cf0 \strokec5 Animation\cf6 \strokec6 </\cf7 \strokec7 label\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 p\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "text-xs text-gray-500 mb-2"\cf6 \strokec6 >\cf0 \strokec5 Enable a subtle pulsing glow on the beads for a lifelike shimmer.\cf6 \strokec6 </\cf7 \strokec7 p\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "density-control"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 <\cf7 \strokec7 label\cf0 \strokec5  \cf4 \strokec4 for\cf6 \strokec6 =\cf8 \strokec8 "blinkToggle"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "flex items-center gap-2 cursor-pointer"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                         \cf6 \strokec6 <\cf7 \strokec7 input\cf0 \strokec5  \cf4 \strokec4 type\cf6 \strokec6 =\cf8 \strokec8 "checkbox"\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "blinkToggle"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded"\cf0 \strokec5  \cf4 \strokec4 checked\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                         \cf6 \strokec6 <\cf7 \strokec7 span\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "font-semibold"\cf6 \strokec6 >\cf0 \strokec5 Enable Pulse Glow\cf6 \strokec6 </\cf7 \strokec7 span\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                     \cf6 \strokec6 </\cf7 \strokec7 label\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             \cf6 \strokec6 <\cf7 \strokec7 input\cf0 \strokec5  \cf4 \strokec4 type\cf6 \strokec6 =\cf8 \strokec8 "file"\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "beadTextureUpload"\cf0 \strokec5  \cf4 \strokec4 accept\cf6 \strokec6 =\cf8 \strokec8 "image/*"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "hidden"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3         \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\
\cb3     \cf6 \strokec6 <\cf7 \strokec7 script\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3         \cf13 \strokec13 const\cf0 \strokec5  physicsAccuracy = \cf14 \strokec14 8\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 const\cf0 \strokec5  mouseInfluenceSize = \cf14 \strokec14 40\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 const\cf0 \strokec5  gravity = \cf14 \strokec14 1800\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 const\cf0 \strokec5  targetHeightRatio = \cf14 \strokec14 0.75\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 const\cf0 \strokec5  \cf15 \strokec15 BASE_THIN_BEAD_SIZE\cf0 \strokec5  = \cf14 \strokec14 2\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 const\cf0 \strokec5  startY = \cf14 \strokec14 20\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 const\cf0 \strokec5  rodOffset = \cf14 \strokec14 5\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 const\cf0 \strokec5  canvasPadding = \cf14 \strokec14 10\cf0 \strokec5 ;\cb1 \
\cb3         \cf13 \strokec13 const\cf0 \strokec5  activeCoverage = \cf14 \strokec14 0.10\cf0 \strokec5 ; \cb1 \
\
\cb3         \cf13 \strokec13 let\cf0 \strokec5  animationTime = \cf14 \strokec14 0\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  particles = [];\cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  constraints = [];\cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  clothSlices = [];\cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  beadTextureCanvas = \cf13 \strokec13 null\cf0 \strokec5 ;\cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  customMatrix = \cf13 \strokec13 null\cf0 \strokec5 ;\cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  mouse = \{ down: \cf13 \strokec13 false\cf0 \strokec5 , button: \cf14 \strokec14 1\cf0 \strokec5 , x: \cf14 \strokec14 0\cf0 \strokec5 , y: \cf14 \strokec14 0\cf0 \strokec5 , px: \cf14 \strokec14 0\cf0 \strokec5 , py: \cf14 \strokec14 0\cf0 \strokec5  \};\cb1 \
\cb3         \cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  \cf15 \strokec15 SIM_POINTS_ACROSS\cf0 \strokec5  = \cf14 \strokec14 100\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  \cf15 \strokec15 SIM_POINTS_DOWN_BASE\cf0 \strokec5  = \cf14 \strokec14 50\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  smallBeadScale = \cf14 \strokec14 0.5\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  largeBeadScale = \cf14 \strokec14 0.9\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  scallopedBeadScale = \cf14 \strokec14 0.5\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  horizontalGapScale = \cf14 \strokec14 1.0\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  scallopDepth = \cf14 \strokec14 150\cf0 \strokec5 ; \cb1 \
\cb3         \cb1 \
\cb3         \cf9 \strokec9 // Static Default Animation Values\cf0 \cb1 \strokec5 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  isBlinkingEnabled = \cf13 \strokec13 true\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 const\cf0 \strokec5  smallBeadFrequency = \cf14 \strokec14 0.33\cf0 \strokec5 ;\cb1 \
\cb3         \cf13 \strokec13 const\cf0 \strokec5  smallBeadIntensity = \cf14 \strokec14 0.7\cf0 \strokec5 ;\cb1 \
\cb3         \cf13 \strokec13 const\cf0 \strokec5  smallBeadGlowRadiusFactor = \cf14 \strokec14 1.0\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 const\cf0 \strokec5  largeBeadFrequency = \cf14 \strokec14 0.50\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 const\cf0 \strokec5  largeBeadIntensity = \cf14 \strokec14 0.10\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 const\cf0 \strokec5  largeBeadGlowRadiusFactor = \cf14 \strokec14 1.7\cf0 \strokec5 ; \cb1 \
\
\cb3         \cf13 \strokec13 let\cf0 \strokec5  unbeadedDotColorHex = \cf11 \strokec11 "#A0A0A0"\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  bgColorHex = \cf11 \strokec11 "#EBEBEB"\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  gradientColorHex = \cf11 \strokec11 "#5C5C5C"\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  useGradient = \cf13 \strokec13 true\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  gradientAngle = \cf14 \strokec14 180\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  isCustomBeadTexture = \cf13 \strokec13 false\cf0 \strokec5 ; \cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  primaryBeadColor1 = \cf11 \strokec11 "#F2DCEA"\cf0 \strokec5 ;\cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  primaryBeadColor2 = \cf11 \strokec11 "#D9F2F6"\cf0 \strokec5 ;\cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  primaryBeadColor3 = \cf11 \strokec11 "#FCFCDC"\cf0 \strokec5 ;\cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  primaryBeadColor4 = \cf11 \strokec11 "#EBFFBF"\cf0 \strokec5 ;\cb1 \
\
\cb3         \cf13 \strokec13 let\cf0 \strokec5  mediaRecorder;\cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  recordedChunks = [];\cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  isRecording = \cf13 \strokec13 false\cf0 \strokec5 ; \cb1 \
\
\cb3         \cf13 \strokec13 let\cf0 \strokec5  canvas, ctx, parent, glowCanvas, glowCtx; \cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  matrixInput, pointsDownInput, pointsAcrossInput, horizontalGapScaleInput;\cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  smallBeadScaleInput, largeBeadScaleInput, scallopedBeadScaleInput, unbeadedDotColorInput;\cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  bgColorInput, gradientColorInput, gradientToggleInput, gradientAngleInput;\cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  blinkToggleInput;\cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  scallopDepthInput; \cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  windowContainerElement; \cb1 \
\cb3         \cf13 \strokec13 let\cf0 \strokec5  recordStartButton, recordStopButton; \cb1 \
\cb3         \cb1 \
\cb3         \cf13 \strokec13 class\cf0 \strokec5  \cf15 \strokec15 Point\cf0 \strokec5  \{\cb1 \
\cb3             \cf13 \strokec13 constructor\cf0 \strokec5 (x, y) \{\cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .x = x; \cf13 \strokec13 this\cf0 \strokec5 .y = y;\cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .px = x; \cf13 \strokec13 this\cf0 \strokec5 .py = y;\cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .vx = \cf14 \strokec14 0\cf0 \strokec5 ; \cf13 \strokec13 this\cf0 \strokec5 .vy = \cf14 \strokec14 0\cf0 \strokec5 ;\cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .pinX = \cf13 \strokec13 null\cf0 \strokec5 ; \cf13 \strokec13 this\cf0 \strokec5 .pinY = \cf13 \strokec13 null\cf0 \strokec5 ;\cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .colors = \cf13 \strokec13 null\cf0 \strokec5 ; \cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .isFleuron = \cf13 \strokec13 false\cf0 \strokec5 ; \cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .isDecorative = \cf13 \strokec13 false\cf0 \strokec5 ; \cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .shapeType = \cf11 \strokec11 'circle'\cf0 \strokec5 ; \cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .sizeFactor = \cf14 \strokec14 1.0\cf0 \strokec5 ; \cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .radius = \cf15 \strokec15 BASE_THIN_BEAD_SIZE\cf0 \strokec5  / \cf14 \strokec14 2\cf0 \strokec5 ; \cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .blinkPhase = \cf15 \strokec15 Math\cf0 \strokec5 .random() * \cf14 \strokec14 100\cf0 \strokec5 ; \cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .activationThreshold = \cf15 \strokec15 Math\cf0 \strokec5 .random(); \cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .blinkFrequency = smallBeadFrequency; \cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .blinkIntensity = smallBeadIntensity; \cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .glowRadiusFactor = smallBeadGlowRadiusFactor; \cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .targetY = \cf13 \strokec13 null\cf0 \strokec5 ; \cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .targetYStiffness = \cf14 \strokec14 1000\cf0 \strokec5 ;\cb1 \
\cb3             \}\cb1 \
\
\cb3             update(delta) \{\cb1 \
\cb3                 \cf13 \strokec13 if\cf0 \strokec5  (mouse.down) \{\cb1 \
\cb3                     \cf13 \strokec13 let\cf0 \strokec5  dx = \cf13 \strokec13 this\cf0 \strokec5 .x - mouse.x, dy = \cf13 \strokec13 this\cf0 \strokec5 .y - mouse.y;\cb1 \
\cb3                     \cf13 \strokec13 let\cf0 \strokec5  dist = \cf15 \strokec15 Math\cf0 \strokec5 .sqrt(dx * dx + dy * dy);\cb1 \
\cb3                     \cf13 \strokec13 if\cf0 \strokec5  (dist < mouseInfluenceSize) \{\cb1 \
\cb3                         \cf13 \strokec13 let\cf0 \strokec5  pullFactor = (\cf14 \strokec14 1\cf0 \strokec5  - dist / mouseInfluenceSize) * \cf14 \strokec14 0.5\cf0 \strokec5 ;\cb1 \
\cb3                         \cf13 \strokec13 this\cf0 \strokec5 .x += (mouse.x - \cf13 \strokec13 this\cf0 \strokec5 .x) * pullFactor;\cb1 \
\cb3                         \cf13 \strokec13 this\cf0 \strokec5 .y += (mouse.y - \cf13 \strokec13 this\cf0 \strokec5 .y) * pullFactor;\cb1 \
\cb3                         \cf13 \strokec13 return\cf0 \strokec5 ; \cb1 \
\cb3                     \}\cb1 \
\cb3                 \}\cb1 \
\cb3                 \cf13 \strokec13 if\cf0 \strokec5  (\cf13 \strokec13 this\cf0 \strokec5 .targetY !== \cf13 \strokec13 null\cf0 \strokec5 ) \{\cb1 \
\cb3                     \cf13 \strokec13 const\cf0 \strokec5  dy = \cf13 \strokec13 this\cf0 \strokec5 .targetY - \cf13 \strokec13 this\cf0 \strokec5 .y;\cb1 \
\cb3                     \cf13 \strokec13 this\cf0 \strokec5 .addForce(\cf14 \strokec14 0\cf0 \strokec5 , dy * \cf13 \strokec13 this\cf0 \strokec5 .targetYStiffness); \cb1 \
\cb3                 \}\cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .addForce(\cf14 \strokec14 0\cf0 \strokec5 , gravity); \cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .blinkPhase += \cf14 \strokec14 0.5\cf0 \strokec5  * delta; \cb1 \
\cb3                 \cf13 \strokec13 let\cf0 \strokec5  nx = \cf13 \strokec13 this\cf0 \strokec5 .x + (\cf13 \strokec13 this\cf0 \strokec5 .x - \cf13 \strokec13 this\cf0 \strokec5 .px) * \cf14 \strokec14 0.995\cf0 \strokec5  + (\cf13 \strokec13 this\cf0 \strokec5 .vx / \cf14 \strokec14 2\cf0 \strokec5 ) * delta * delta;\cb1 \
\cb3                 \cf13 \strokec13 let\cf0 \strokec5  ny = \cf13 \strokec13 this\cf0 \strokec5 .y + (\cf13 \strokec13 this\cf0 \strokec5 .y - \cf13 \strokec13 this\cf0 \strokec5 .py) * \cf14 \strokec14 0.995\cf0 \strokec5  + (\cf13 \strokec13 this\cf0 \strokec5 .vy / \cf14 \strokec14 2\cf0 \strokec5 ) * delta * delta;\cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .px = \cf13 \strokec13 this\cf0 \strokec5 .x; \cf13 \strokec13 this\cf0 \strokec5 .py = \cf13 \strokec13 this\cf0 \strokec5 .y;\cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .x = nx; \cf13 \strokec13 this\cf0 \strokec5 .y = ny;\cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .vx = \cf14 \strokec14 0\cf0 \strokec5 ; \cf13 \strokec13 this\cf0 \strokec5 .vy = \cf14 \strokec14 0\cf0 \strokec5 ;\cb1 \
\cb3             \}\cb1 \
\cb3             resolveConstraints() \{\cb1 \
\cb3                 \cf13 \strokec13 if\cf0 \strokec5  (\cf13 \strokec13 this\cf0 \strokec5 .pinX != \cf13 \strokec13 null\cf0 \strokec5  && \cf13 \strokec13 this\cf0 \strokec5 .pinY != \cf13 \strokec13 null\cf0 \strokec5 ) \{\cb1 \
\cb3                     \cf13 \strokec13 this\cf0 \strokec5 .x = \cf13 \strokec13 this\cf0 \strokec5 .pinX; \cf13 \strokec13 this\cf0 \strokec5 .y = \cf13 \strokec13 this\cf0 \strokec5 .pinY;\cb1 \
\cb3                     \cf13 \strokec13 return\cf0 \strokec5 ;\cb1 \
\cb3                 \}\cb1 \
\cb3                 \cf13 \strokec13 if\cf0 \strokec5  (\cf13 \strokec13 this\cf0 \strokec5 .y > canvas.height - canvasPadding) \{\cb1 \
\cb3                     \cf13 \strokec13 this\cf0 \strokec5 .y = canvas.height - canvasPadding;\cb1 \
\cb3                     \cf13 \strokec13 this\cf0 \strokec5 .x = \cf13 \strokec13 this\cf0 \strokec5 .px + (\cf13 \strokec13 this\cf0 \strokec5 .x - \cf13 \strokec13 this\cf0 \strokec5 .px) * \cf14 \strokec14 0.5\cf0 \strokec5 ;\cb1 \
\cb3                 \}\cb1 \
\cb3             \}\cb1 \
\cb3             addForce(x, y) \{ \cf13 \strokec13 this\cf0 \strokec5 .vx += x; \cf13 \strokec13 this\cf0 \strokec5 .vy += y; \}\cb1 \
\cb3             pin(pinx, piny) \{ \cf13 \strokec13 this\cf0 \strokec5 .pinX = pinx; \cf13 \strokec13 this\cf0 \strokec5 .pinY = piny; \}\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf13 \strokec13 class\cf0 \strokec5  \cf15 \strokec15 Constraint\cf0 \strokec5  \{\cb1 \
\cb3             \cf13 \strokec13 constructor\cf0 \strokec5 (p1, p2, length) \{\cb1 \
\cb3                 \cf13 \strokec13 this\cf0 \strokec5 .p1 = p1; \cf13 \strokec13 this\cf0 \strokec5 .p2 = p2; \cf13 \strokec13 this\cf0 \strokec5 .length = length;\cb1 \
\cb3             \}\cb1 \
\cb3             resolve() \{\cb1 \
\cb3                 \cf13 \strokec13 let\cf0 \strokec5  dx = \cf13 \strokec13 this\cf0 \strokec5 .p1.x - \cf13 \strokec13 this\cf0 \strokec5 .p2.x;\cb1 \
\cb3                 \cf13 \strokec13 let\cf0 \strokec5  dy = \cf13 \strokec13 this\cf0 \strokec5 .p1.y - \cf13 \strokec13 this\cf0 \strokec5 .p2.y;\cb1 \
\cb3                 \cf13 \strokec13 let\cf0 \strokec5  dist = \cf15 \strokec15 Math\cf0 \strokec5 .sqrt(dx * dx + dy * dy);\cb1 \
\cb3                 \cf13 \strokec13 if\cf0 \strokec5  (dist === \cf14 \strokec14 0\cf0 \strokec5  || dist < \cf13 \strokec13 this\cf0 \strokec5 .length) \cf13 \strokec13 return\cf0 \strokec5 ;\cb1 \
\cb3                 \cf13 \strokec13 let\cf0 \strokec5  diff = (\cf13 \strokec13 this\cf0 \strokec5 .length - dist) / dist;\cb1 \
\cb3                 \cf13 \strokec13 let\cf0 \strokec5  adjust = diff * \cf14 \strokec14 0.55\cf0 \strokec5 ;   \cb1 \
\cb3                 \cf13 \strokec13 let\cf0 \strokec5  offsetX = dx * adjust;\cb1 \
\cb3                 \cf13 \strokec13 let\cf0 \strokec5  offsetY = dy * adjust;\cb1 \
\cb3                 \cf13 \strokec13 if\cf0 \strokec5  (\cf13 \strokec13 this\cf0 \strokec5 .p1.pinX === \cf13 \strokec13 null\cf0 \strokec5 ) \{ \cf13 \strokec13 this\cf0 \strokec5 .p1.x += offsetX; \cf13 \strokec13 this\cf0 \strokec5 .p1.y += offsetY; \}\cb1 \
\cb3                 \cf13 \strokec13 if\cf0 \strokec5  (\cf13 \strokec13 this\cf0 \strokec5 .p2.pinX === \cf13 \strokec13 null\cf0 \strokec5 ) \{ \cf13 \strokec13 this\cf0 \strokec5 .p2.x -= offsetX; \cf13 \strokec13 this\cf0 \strokec5 .p2.y -= offsetY; \}\cb1 \
\cb3             \}\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf13 \strokec13 function\cf0 \strokec5  hexToRgb(h) \{\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  bigint = parseInt(h.substring(\cf14 \strokec14 1\cf0 \strokec5 ), \cf14 \strokec14 16\cf0 \strokec5 );\cb1 \
\cb3             \cf13 \strokec13 return\cf0 \strokec5  [(bigint >> \cf14 \strokec14 16\cf0 \strokec5 ) & \cf14 \strokec14 255\cf0 \strokec5 , (bigint >> \cf14 \strokec14 8\cf0 \strokec5 ) & \cf14 \strokec14 255\cf0 \strokec5 , bigint & \cf14 \strokec14 255\cf0 \strokec5 ];\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf13 \strokec13 function\cf0 \strokec5  rgbToHsl(r, g, b) \{\cb1 \
\cb3             r /= \cf14 \strokec14 255\cf0 \strokec5 ; g /= \cf14 \strokec14 255\cf0 \strokec5 ; b /= \cf14 \strokec14 255\cf0 \strokec5 ;\cb1 \
\cb3             \cf13 \strokec13 let\cf0 \strokec5  max = \cf15 \strokec15 Math\cf0 \strokec5 .max(r, g, b), min = \cf15 \strokec15 Math\cf0 \strokec5 .min(r, g, b);\cb1 \
\cb3             \cf13 \strokec13 let\cf0 \strokec5  h, s, l = (max + min) / \cf14 \strokec14 2\cf0 \strokec5 ;\cb1 \
\cb3             \cf13 \strokec13 if\cf0 \strokec5  (max === min) \{ h = s = \cf14 \strokec14 0\cf0 \strokec5 ; \} \cb1 \
\cb3             \cf13 \strokec13 else\cf0 \strokec5  \{\cb1 \
\cb3                 \cf13 \strokec13 let\cf0 \strokec5  d = max - min;\cb1 \
\cb3                 s = l > \cf14 \strokec14 0.5\cf0 \strokec5  ? d / (\cf14 \strokec14 2\cf0 \strokec5  - max - min) : d / (max + min);\cb1 \
\cb3                 \cf13 \strokec13 switch\cf0 \strokec5  (max) \{\cb1 \
\cb3                     \cf13 \strokec13 case\cf0 \strokec5  r: h = (g - b) / d + (g < b ? \cf14 \strokec14 6\cf0 \strokec5  : \cf14 \strokec14 0\cf0 \strokec5 ); \cf13 \strokec13 break\cf0 \strokec5 ;\cb1 \
\cb3                     \cf13 \strokec13 case\cf0 \strokec5  g: h = (b - r) / d + \cf14 \strokec14 2\cf0 \strokec5 ; \cf13 \strokec13 break\cf0 \strokec5 ;\cb1 \
\cb3                     \cf13 \strokec13 case\cf0 \strokec5  b: h = (r - g) / d + \cf14 \strokec14 4\cf0 \strokec5 ; \cf13 \strokec13 break\cf0 \strokec5 ;\cb1 \
\cb3                 \}\cb1 \
\cb3                 h /= \cf14 \strokec14 6\cf0 \strokec5 ;\cb1 \
\cb3             \}\cb1 \
\cb3             \cf13 \strokec13 return\cf0 \strokec5  [h * \cf14 \strokec14 360\cf0 \strokec5 , s * \cf14 \strokec14 100\cf0 \strokec5 , l * \cf14 \strokec14 100\cf0 \strokec5 ];\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf13 \strokec13 function\cf0 \strokec5  hslToHex(h, s, l) \{\cb1 \
\cb3             h /= \cf14 \strokec14 360\cf0 \strokec5 ; s /= \cf14 \strokec14 100\cf0 \strokec5 ; l /= \cf14 \strokec14 100\cf0 \strokec5 ;\cb1 \
\cb3             \cf13 \strokec13 let\cf0 \strokec5  r, g, b;\cb1 \
\cb3             \cf13 \strokec13 if\cf0 \strokec5  (s === \cf14 \strokec14 0\cf0 \strokec5 ) \{ r = g = b = l; \} \cb1 \
\cb3             \cf13 \strokec13 else\cf0 \strokec5  \{\cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  hue2rgb = (p, q, t) => \{\cb1 \
\cb3                     \cf13 \strokec13 if\cf0 \strokec5  (t < \cf14 \strokec14 0\cf0 \strokec5 ) t += \cf14 \strokec14 1\cf0 \strokec5 ; \cf13 \strokec13 if\cf0 \strokec5  (t > \cf14 \strokec14 1\cf0 \strokec5 ) t -= \cf14 \strokec14 1\cf0 \strokec5 ;\cb1 \
\cb3                     \cf13 \strokec13 if\cf0 \strokec5  (t < \cf14 \strokec14 1\cf0 \strokec5  / \cf14 \strokec14 6\cf0 \strokec5 ) \cf13 \strokec13 return\cf0 \strokec5  p + (q - p) * \cf14 \strokec14 6\cf0 \strokec5  * t;\cb1 \
\cb3                     \cf13 \strokec13 if\cf0 \strokec5  (t < \cf14 \strokec14 1\cf0 \strokec5  / \cf14 \strokec14 2\cf0 \strokec5 ) \cf13 \strokec13 return\cf0 \strokec5  q;\cb1 \
\cb3                     \cf13 \strokec13 if\cf0 \strokec5  (t < \cf14 \strokec14 2\cf0 \strokec5  / \cf14 \strokec14 3\cf0 \strokec5 ) \cf13 \strokec13 return\cf0 \strokec5  p + (q - p) * (\cf14 \strokec14 2\cf0 \strokec5  / \cf14 \strokec14 3\cf0 \strokec5  - t) * \cf14 \strokec14 6\cf0 \strokec5 ;\cb1 \
\cb3                     \cf13 \strokec13 return\cf0 \strokec5  p;\cb1 \
\cb3                 \};\cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  q = l < \cf14 \strokec14 0.5\cf0 \strokec5  ? l * (\cf14 \strokec14 1\cf0 \strokec5  + s) : l + s - l * s;\cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  p = \cf14 \strokec14 2\cf0 \strokec5  * l - q;\cb1 \
\cb3                 r = hue2rgb(p, q, h + \cf14 \strokec14 1\cf0 \strokec5  / \cf14 \strokec14 3\cf0 \strokec5 ); g = hue2rgb(p, q, h); b = hue2rgb(p, q, h - \cf14 \strokec14 1\cf0 \strokec5  / \cf14 \strokec14 3\cf0 \strokec5 );\cb1 \
\cb3             \}\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  toHex = (c) => \{\cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  hexPair = \cf15 \strokec15 Math\cf0 \strokec5 .round(c * \cf14 \strokec14 255\cf0 \strokec5 ).toString(\cf14 \strokec14 16\cf0 \strokec5 );\cb1 \
\cb3                 \cf13 \strokec13 return\cf0 \strokec5  hexPair.length === \cf14 \strokec14 1\cf0 \strokec5  ? \cf11 \strokec11 '0'\cf0 \strokec5  + hexPair : hexPair;\cb1 \
\cb3             \};\cb1 \
\cb3             \cf13 \strokec13 return\cf0 \strokec5  \cf11 \strokec11 `#\cf0 \strokec5 $\{toHex(r)\}$\{toHex(g)\}$\{toHex(b)\}\cf11 \strokec11 `\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf13 \strokec13 function\cf0 \strokec5  alphaToHex(alpha) \{\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  hex = \cf15 \strokec15 Math\cf0 \strokec5 .round(\cf15 \strokec15 Math\cf0 \strokec5 .min(\cf14 \strokec14 1\cf0 \strokec5 , \cf15 \strokec15 Math\cf0 \strokec5 .max(\cf14 \strokec14 0\cf0 \strokec5 , alpha)) * \cf14 \strokec14 255\cf0 \strokec5 ).toString(\cf14 \strokec14 16\cf0 \strokec5 );\cb1 \
\cb3             \cf13 \strokec13 return\cf0 \strokec5  hex.length === \cf14 \strokec14 1\cf0 \strokec5  ? \cf11 \strokec11 '0'\cf0 \strokec5  + hex : hex;\cb1 \
\cb3         \}\cb1 \
\cb3         \cb1 \
\cb3         \cf13 \strokec13 function\cf0 \strokec5  getShades(hex) \{\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  [r, g, b] = hexToRgb(hex);\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  \cf15 \strokec15 HSL\cf0 \strokec5  = rgbToHsl(r, g, b);\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  lightHSL = [\cf15 \strokec15 HSL\cf0 \strokec5 [\cf14 \strokec14 0\cf0 \strokec5 ], \cf15 \strokec15 HSL\cf0 \strokec5 [\cf14 \strokec14 1\cf0 \strokec5 ], \cf15 \strokec15 Math\cf0 \strokec5 .min(\cf14 \strokec14 100\cf0 \strokec5 , \cf15 \strokec15 HSL\cf0 \strokec5 [\cf14 \strokec14 2\cf0 \strokec5 ] + \cf14 \strokec14 15\cf0 \strokec5 )]; \cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  darkHSL = [\cf15 \strokec15 HSL\cf0 \strokec5 [\cf14 \strokec14 0\cf0 \strokec5 ], \cf15 \strokec15 HSL\cf0 \strokec5 [\cf14 \strokec14 1\cf0 \strokec5 ], \cf15 \strokec15 Math\cf0 \strokec5 .max(\cf14 \strokec14 0\cf0 \strokec5 , \cf15 \strokec15 HSL\cf0 \strokec5 [\cf14 \strokec14 2\cf0 \strokec5 ] - \cf14 \strokec14 15\cf0 \strokec5 )]; \cb1 \
\cb3             \cf13 \strokec13 return\cf0 \strokec5  \{\cb1 \
\cb3                 light: hslToHex(lightHSL[\cf14 \strokec14 0\cf0 \strokec5 ], lightHSL[\cf14 \strokec14 1\cf0 \strokec5 ], lightHSL[\cf14 \strokec14 2\cf0 \strokec5 ]),\cb1 \
\cb3                 mid: hex,\cb1 \
\cb3                 dark: hslToHex(darkHSL[\cf14 \strokec14 0\cf0 \strokec5 ], darkHSL[\cf14 \strokec14 1\cf0 \strokec5 ], darkHSL[\cf14 \strokec14 2\cf0 \strokec5 ])\cb1 \
\cb3             \};\cb1 \
\cb3         \}\cb1 \
\cb3         \cb1 \
\cb3         \cf13 \strokec13 function\cf0 \strokec5  buildUserColorPalette() \{\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  userHexColors = [primaryBeadColor1, primaryBeadColor2, primaryBeadColor3, primaryBeadColor4];\cb1 \
\cb3             \cf13 \strokec13 return\cf0 \strokec5  userHexColors.map(hex => getShades(hex)); \cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf13 \strokec13 function\cf0 \strokec5  assignRandomShape() \{\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  shapes = [\cf11 \strokec11 'flower'\cf0 \strokec5 , \cf11 \strokec11 'square'\cf0 \strokec5 , \cf11 \strokec11 'circle'\cf0 \strokec5 , \cf11 \strokec11 'hexagon'\cf0 \strokec5 ]; \cb1 \
\cb3             \cf13 \strokec13 return\cf0 \strokec5  shapes[\cf15 \strokec15 Math\cf0 \strokec5 .floor(\cf15 \strokec15 Math\cf0 \strokec5 .random() * shapes.length)];\cb1 \
\cb3         \}\cb1 \
\cb3         \cb1 \
\cb3         \cf13 \strokec13 function\cf0 \strokec5  getCanvasRelativeCoords(clientX, clientY) \{\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  parentRect = parent.getBoundingClientRect();\cb1 \
\cb3             \cf13 \strokec13 return\cf0 \strokec5  \{ x: clientX - parentRect.left, y: clientY - parentRect.top \};\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf13 \strokec13 function\cf0 \strokec5  getGradientCoords(angleDegrees) \{\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  w = canvas.width, h = canvas.height;\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  angleRad = (angleDegrees - \cf14 \strokec14 90\cf0 \strokec5 ) * (\cf15 \strokec15 Math\cf0 \strokec5 .\cf15 \strokec15 PI\cf0 \strokec5  / \cf14 \strokec14 180\cf0 \strokec5 ); \cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  maxDist = \cf15 \strokec15 Math\cf0 \strokec5 .abs(w * \cf15 \strokec15 Math\cf0 \strokec5 .cos(angleRad)) + \cf15 \strokec15 Math\cf0 \strokec5 .abs(h * \cf15 \strokec15 Math\cf0 \strokec5 .sin(angleRad));\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  centerX = w / \cf14 \strokec14 2\cf0 \strokec5 , centerY = h / \cf14 \strokec14 2\cf0 \strokec5 , halfDist = maxDist / \cf14 \strokec14 2\cf0 \strokec5 ;\cb1 \
\cb3             \cf13 \strokec13 return\cf0 \strokec5  \{\cb1 \
\cb3                 x0: centerX - halfDist * \cf15 \strokec15 Math\cf0 \strokec5 .cos(angleRad), y0: centerY - halfDist * \cf15 \strokec15 Math\cf0 \strokec5 .sin(angleRad),\cb1 \
\cb3                 x1: centerX + halfDist * \cf15 \strokec15 Math\cf0 \strokec5 .cos(angleRad), y1: centerY + halfDist * \cf15 \strokec15 Math\cf0 \strokec5 .sin(angleRad)\cb1 \
\cb3             \};\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf13 \strokec13 function\cf0 \strokec5  drawTextureSlice(p, context, currentAlpha) \{ \cb1 \
\cb3             \cf13 \strokec13 if\cf0 \strokec5  (!beadTextureCanvas || beadTextureCanvas.width <= \cf14 \strokec14 0\cf0 \strokec5  || beadTextureCanvas.height <= \cf14 \strokec14 0\cf0 \strokec5 ) \cf13 \strokec13 return\cf0 \strokec5 ;\cb1 \
\cb3             \cf13 \strokec13 let\cf0 \strokec5  currentScale = p.isDecorative ? scallopedBeadScale : (p.isFleuron ? largeBeadScale : smallBeadScale);\cb1 \
\cb3             \cf13 \strokec13 let\cf0 \strokec5  dynamicFactor = p.isDecorative ? (p.sizeFactor || \cf14 \strokec14 1.0\cf0 \strokec5 ) : \cf14 \strokec14 1.0\cf0 \strokec5 ;\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  finalSize = p.radius * currentScale * dynamicFactor; \cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  visibleWidth = canvas.width - \cf14 \strokec14 2\cf0 \strokec5  * canvasPadding;\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  xOffsetScreen = canvasPadding + (visibleWidth - beadTextureCanvas.width) / \cf14 \strokec14 2\cf0 \strokec5 ;\cb1 \
\cb3             context.save();\cb1 \
\cb3             context.beginPath();\cb1 \
\cb3             \cf13 \strokec13 if\cf0 \strokec5  (p.shapeType === \cf11 \strokec11 'circle'\cf0 \strokec5 ) context.arc(p.x, p.y, finalSize, \cf14 \strokec14 0\cf0 \strokec5 , \cf15 \strokec15 Math\cf0 \strokec5 .\cf15 \strokec15 PI\cf0 \strokec5  * \cf14 \strokec14 2\cf0 \strokec5 );\cb1 \
\cb3             \cf13 \strokec13 else\cf0 \strokec5  \cf13 \strokec13 if\cf0 \strokec5  (p.shapeType === \cf11 \strokec11 'flower'\cf0 \strokec5 ) \{\cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  petalRadius = finalSize * \cf14 \strokec14 0.7\cf0 \strokec5 , offset = finalSize * \cf14 \strokec14 0.85\cf0 \strokec5 ;     \cb1 \
\cb3                 context.arc(p.x, p.y - offset, petalRadius, \cf14 \strokec14 0\cf0 \strokec5 , \cf15 \strokec15 Math\cf0 \strokec5 .\cf15 \strokec15 PI\cf0 \strokec5  * \cf14 \strokec14 2\cf0 \strokec5 );\cb1 \
\cb3                 context.arc(p.x + offset, p.y, petalRadius, \cf14 \strokec14 0\cf0 \strokec5 , \cf15 \strokec15 Math\cf0 \strokec5 .\cf15 \strokec15 PI\cf0 \strokec5  * \cf14 \strokec14 2\cf0 \strokec5 );\cb1 \
\cb3                 context.arc(p.x, p.y + offset, petalRadius, \cf14 \strokec14 0\cf0 \strokec5 , \cf15 \strokec15 Math\cf0 \strokec5 .\cf15 \strokec15 PI\cf0 \strokec5  * \cf14 \strokec14 2\cf0 \strokec5 );\cb1 \
\cb3                 context.arc(p.x - offset, p.y, petalRadius, \cf14 \strokec14 0\cf0 \strokec5 , \cf15 \strokec15 Math\cf0 \strokec5 .\cf15 \strokec15 PI\cf0 \strokec5  * \cf14 \strokec14 2\cf0 \strokec5 );\cb1 \
\cb3             \} \cf13 \strokec13 else\cf0 \strokec5  \cf13 \strokec13 if\cf0 \strokec5  (p.shapeType === \cf11 \strokec11 'hexagon'\cf0 \strokec5 ) \{\cb1 \
\cb3                 \cf13 \strokec13 for\cf0 \strokec5  (\cf13 \strokec13 let\cf0 \strokec5  i = \cf14 \strokec14 0\cf0 \strokec5 ; i < \cf14 \strokec14 6\cf0 \strokec5 ; i++) \{\cb1 \
\cb3                     \cf13 \strokec13 const\cf0 \strokec5  angle = (\cf15 \strokec15 Math\cf0 \strokec5 .\cf15 \strokec15 PI\cf0 \strokec5  / \cf14 \strokec14 3\cf0 \strokec5 ) * i;\cb1 \
\cb3                     \cf13 \strokec13 const\cf0 \strokec5  x = p.x + finalSize * \cf15 \strokec15 Math\cf0 \strokec5 .cos(angle), y = p.y + finalSize * \cf15 \strokec15 Math\cf0 \strokec5 .sin(angle);\cb1 \
\cb3                     \cf13 \strokec13 if\cf0 \strokec5  (i === \cf14 \strokec14 0\cf0 \strokec5 ) context.moveTo(x, y); \cf13 \strokec13 else\cf0 \strokec5  context.lineTo(x, y);\cb1 \
\cb3                 \}\cb1 \
\cb3             \} \cf13 \strokec13 else\cf0 \strokec5  \cf13 \strokec13 if\cf0 \strokec5  (p.shapeType === \cf11 \strokec11 'square'\cf0 \strokec5 ) context.rect(p.x - finalSize, p.y - finalSize, finalSize * \cf14 \strokec14 2\cf0 \strokec5 , finalSize * \cf14 \strokec14 2\cf0 \strokec5 );\cb1 \
\cb3             context.closePath(); context.clip();\cb1 \
\cb3             context.globalAlpha = currentAlpha;\cb1 \
\cb3             context.drawImage(beadTextureCanvas, \cf14 \strokec14 0\cf0 \strokec5 , \cf14 \strokec14 0\cf0 \strokec5 , beadTextureCanvas.width, beadTextureCanvas.height, xOffsetScreen, startY, beadTextureCanvas.width, beadTextureCanvas.height);\cb1 \
\cb3             context.restore(); \cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf13 \strokec13 function\cf0 \strokec5  drawShape(p, colors, shape, isDecorative = \cf13 \strokec13 false\cf0 \strokec5 , targetContext = ctx, isGlowPass = \cf13 \strokec13 false\cf0 \strokec5 ) \{\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  context = targetContext;\cb1 \
\cb3             \cf13 \strokec13 let\cf0 \strokec5  currentScale = p.isDecorative ? scallopedBeadScale : (p.isFleuron ? largeBeadScale : smallBeadScale);\cb1 \
\cb3             \cf13 \strokec13 let\cf0 \strokec5  dynamicFactor = p.isDecorative ? (p.sizeFactor || \cf14 \strokec14 1.0\cf0 \strokec5 ) : \cf14 \strokec14 1.0\cf0 \strokec5 ;\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  finalSize = p.radius * currentScale * dynamicFactor; \cb1 \
\cb3             \cf13 \strokec13 if\cf0 \strokec5  (!isFinite(finalSize) || finalSize <= \cf14 \strokec14 0\cf0 \strokec5 ) \cf13 \strokec13 return\cf0 \strokec5 ;\cb1 \
\cb3             \cf13 \strokec13 let\cf0 \strokec5  currentAlpha = \cf14 \strokec14 1.0\cf0 \strokec5 ;\cb1 \
\cb3             \cf13 \strokec13 if\cf0 \strokec5  (isBlinkingEnabled) \{\cb1 \
\cb3                 \cf13 \strokec13 if\cf0 \strokec5  (p.activationThreshold <= activeCoverage) \{\cb1 \
\cb3                     \cf13 \strokec13 const\cf0 \strokec5  angularSpeed = p.blinkFrequency * \cf14 \strokec14 2\cf0 \strokec5  * \cf15 \strokec15 Math\cf0 \strokec5 .\cf15 \strokec15 PI\cf0 \strokec5 ;\cb1 \
\cb3                     \cf13 \strokec13 const\cf0 \strokec5  noise = (\cf15 \strokec15 Math\cf0 \strokec5 .sin(p.blinkPhase + animationTime * angularSpeed) + \cf14 \strokec14 1\cf0 \strokec5 ) / \cf14 \strokec14 2\cf0 \strokec5 ;\cb1 \
\cb3                     currentAlpha = p.blinkIntensity + (\cf14 \strokec14 1.0\cf0 \strokec5  - p.blinkIntensity) * noise;\cb1 \
\cb3                 \}\cb1 \
\cb3             \}\cb1 \
\cb3             \cf13 \strokec13 if\cf0 \strokec5  (isGlowPass) \{\cb1 \
\cb3                 \cf13 \strokec13 if\cf0 \strokec5  (!isBlinkingEnabled || (currentAlpha < \cf14 \strokec14 0.95\cf0 \strokec5  && p.activationThreshold > activeCoverage)) \cf13 \strokec13 return\cf0 \strokec5 ;\cb1 \
\cb3                 context.shadowBlur = finalSize * p.glowRadiusFactor * (\cf14 \strokec14 2.0\cf0 \strokec5  - p.blinkIntensity) * \cf14 \strokec14 0.4\cf0 \strokec5 ;\cb1 \
\cb3                 context.shadowColor = colors.light; context.fillStyle = colors.light; context.globalAlpha = currentAlpha;\cb1 \
\cb3             \} \cf13 \strokec13 else\cf0 \strokec5  \{\cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  drawAlpha = isBlinkingEnabled ? currentAlpha : \cf14 \strokec14 1.0\cf0 \strokec5 ;\cb1 \
\cb3                 context.globalAlpha = \cf14 \strokec14 1.0\cf0 \strokec5 ; context.shadowBlur = \cf14 \strokec14 0\cf0 \strokec5 ;\cb1 \
\cb3                 \cf13 \strokec13 if\cf0 \strokec5  (isCustomBeadTexture && p.isFleuron && !isDecorative) \{\cb1 \
\cb3                     drawTextureSlice(p, context, drawAlpha);\cb1 \
\cb3                     context.fillStyle = \cf11 \strokec11 '#ffffff4d'\cf0 \strokec5 ; \cb1 \
\cb3                     context.globalAlpha = drawAlpha;\cb1 \
\cb3                     context.beginPath(); context.arc(p.x - finalSize/\cf14 \strokec14 3\cf0 \strokec5 , p.y - finalSize/\cf14 \strokec14 3\cf0 \strokec5 , finalSize/\cf14 \strokec14 5\cf0 \strokec5 , \cf14 \strokec14 0\cf0 \strokec5 , \cf15 \strokec15 Math\cf0 \strokec5 .\cf15 \strokec15 PI\cf0 \strokec5  * \cf14 \strokec14 2\cf0 \strokec5 ); context.fill();\cb1 \
\cb3                     \cf13 \strokec13 return\cf0 \strokec5 ;\cb1 \
\cb3                 \}\cb1 \
\cb3                 context.globalAlpha = drawAlpha;\cb1 \
\cb3                 context.beginPath();\cb1 \
\cb3                 \cf13 \strokec13 if\cf0 \strokec5  (shape === \cf11 \strokec11 'circle'\cf0 \strokec5 ) context.arc(p.x, p.y, finalSize, \cf14 \strokec14 0\cf0 \strokec5 , \cf15 \strokec15 Math\cf0 \strokec5 .\cf15 \strokec15 PI\cf0 \strokec5  * \cf14 \strokec14 2\cf0 \strokec5 );\cb1 \
\cb3                 \cf13 \strokec13 else\cf0 \strokec5  \cf13 \strokec13 if\cf0 \strokec5  (shape === \cf11 \strokec11 'flower'\cf0 \strokec5 ) \{\cb1 \
\cb3                     \cf13 \strokec13 const\cf0 \strokec5  petalRadius = finalSize * \cf14 \strokec14 0.7\cf0 \strokec5 , offset = finalSize * \cf14 \strokec14 0.85\cf0 \strokec5 ;     \cb1 \
\cb3                     context.arc(p.x, p.y - offset, petalRadius, \cf14 \strokec14 0\cf0 \strokec5 , \cf15 \strokec15 Math\cf0 \strokec5 .\cf15 \strokec15 PI\cf0 \strokec5  * \cf14 \strokec14 2\cf0 \strokec5 );\cb1 \
\cb3                     context.arc(p.x + offset, p.y, petalRadius, \cf14 \strokec14 0\cf0 \strokec5 , \cf15 \strokec15 Math\cf0 \strokec5 .\cf15 \strokec15 PI\cf0 \strokec5  * \cf14 \strokec14 2\cf0 \strokec5 );\cb1 \
\cb3                     context.arc(p.x, p.y + offset, petalRadius, \cf14 \strokec14 0\cf0 \strokec5 , \cf15 \strokec15 Math\cf0 \strokec5 .\cf15 \strokec15 PI\cf0 \strokec5  * \cf14 \strokec14 2\cf0 \strokec5 );\cb1 \
\cb3                     context.arc(p.x - offset, p.y, petalRadius, \cf14 \strokec14 0\cf0 \strokec5 , \cf15 \strokec15 Math\cf0 \strokec5 .\cf15 \strokec15 PI\cf0 \strokec5  * \cf14 \strokec14 2\cf0 \strokec5 );\cb1 \
\cb3                 \} \cf13 \strokec13 else\cf0 \strokec5  \cf13 \strokec13 if\cf0 \strokec5  (shape === \cf11 \strokec11 'hexagon'\cf0 \strokec5 ) \{\cb1 \
\cb3                     \cf13 \strokec13 for\cf0 \strokec5  (\cf13 \strokec13 let\cf0 \strokec5  i = \cf14 \strokec14 0\cf0 \strokec5 ; i < \cf14 \strokec14 6\cf0 \strokec5 ; i++) \{\cb1 \
\cb3                         \cf13 \strokec13 const\cf0 \strokec5  angle = (\cf15 \strokec15 Math\cf0 \strokec5 .\cf15 \strokec15 PI\cf0 \strokec5  / \cf14 \strokec14 3\cf0 \strokec5 ) * i;\cb1 \
\cb3                         \cf13 \strokec13 const\cf0 \strokec5  x = p.x + finalSize * \cf15 \strokec15 Math\cf0 \strokec5 .cos(angle), y = p.y + finalSize * \cf15 \strokec15 Math\cf0 \strokec5 .sin(angle);\cb1 \
\cb3                         \cf13 \strokec13 if\cf0 \strokec5  (i === \cf14 \strokec14 0\cf0 \strokec5 ) context.moveTo(x, y); \cf13 \strokec13 else\cf0 \strokec5  context.lineTo(x, y);\cb1 \
\cb3                     \}\cb1 \
\cb3                 \} \cf13 \strokec13 else\cf0 \strokec5  \cf13 \strokec13 if\cf0 \strokec5  (shape === \cf11 \strokec11 'square'\cf0 \strokec5 ) context.rect(p.x - finalSize, p.y - finalSize, finalSize * \cf14 \strokec14 2\cf0 \strokec5 , finalSize * \cf14 \strokec14 2\cf0 \strokec5 );\cb1 \
\cb3                 context.closePath();\cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  gradient = context.createRadialGradient(p.x - finalSize / \cf14 \strokec14 4\cf0 \strokec5 , p.y - finalSize / \cf14 \strokec14 4\cf0 \strokec5 , \cf14 \strokec14 1\cf0 \strokec5 , p.x, p.y, finalSize * \cf14 \strokec14 1.4\cf0 \strokec5 );  \cb1 \
\cb3                 gradient.addColorStop(\cf14 \strokec14 0\cf0 \strokec5 , colors.light); gradient.addColorStop(\cf14 \strokec14 0.5\cf0 \strokec5 , colors.mid); gradient.addColorStop(\cf14 \strokec14 1\cf0 \strokec5 , colors.dark);\cb1 \
\cb3                 context.fillStyle = gradient; context.fill();\cb1 \
\cb3                 \cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  highlightAlpha = (p.isFleuron || isDecorative ? \cf14 \strokec14 0.3\cf0 \strokec5  : \cf14 \strokec14 0.7\cf0 \strokec5 ) * drawAlpha;\cb1 \
\cb3                 context.fillStyle = \cf11 \strokec11 '#ffffff'\cf0 \strokec5  + alphaToHex(highlightAlpha);\cb1 \
\cb3                 context.globalAlpha = \cf14 \strokec14 1.0\cf0 \strokec5 ; \cb1 \
\cb3                 context.beginPath(); context.arc(p.x - finalSize/\cf14 \strokec14 3\cf0 \strokec5 , p.y - finalSize/\cf14 \strokec14 3\cf0 \strokec5 , finalSize/\cf14 \strokec14 5\cf0 \strokec5 , \cf14 \strokec14 0\cf0 \strokec5 , \cf15 \strokec15 Math\cf0 \strokec5 .\cf15 \strokec15 PI\cf0 \strokec5  * \cf14 \strokec14 2\cf0 \strokec5 ); context.fill();\cb1 \
\cb3                 context.strokeStyle = colors.dark; context.lineWidth = \cf14 \strokec14 1.0\cf0 \strokec5 ; context.stroke();\cb1 \
\cb3             \}\cb1 \
\cb3             \cf13 \strokec13 if\cf0 \strokec5  (isGlowPass) context.shadowBlur = \cf14 \strokec14 0\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\cb3         \cb1 \
\cb3         \cf13 \strokec13 function\cf0 \strokec5  updateParticleVisualsOnly() \{\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  \cf15 \strokec15 USER_PALETTE\cf0 \strokec5  = buildUserColorPalette();\cb1 \
\cb3             clothSlices.forEach((slice, sliceIdx) => \{\cb1 \
\cb3                 \cf13 \strokec13 if\cf0 \strokec5  (sliceIdx === \cf14 \strokec14 0\cf0 \strokec5 ) \{\cb1 \
\cb3                     slice.forEach((row, y) => \{\cb1 \
\cb3                         row.forEach((p, x) => \{\cb1 \
\cb3                             \cf13 \strokec13 if\cf0 \strokec5  (p.isFleuron) \{\cb1 \
\cb3                                 p.colors = \cf15 \strokec15 USER_PALETTE\cf0 \strokec5 [(x + \cf15 \strokec15 Math\cf0 \strokec5 .floor(y/\cf14 \strokec14 5\cf0 \strokec5 )) % \cf15 \strokec15 USER_PALETTE\cf0 \strokec5 .length];\cb1 \
\cb3                             \} \cf13 \strokec13 else\cf0 \strokec5  \{\cb1 \
\cb3                                 p.colors = \cf15 \strokec15 USER_PALETTE\cf0 \strokec5 [\cf15 \strokec15 Math\cf0 \strokec5 .floor(\cf15 \strokec15 Math\cf0 \strokec5 .random() * \cf15 \strokec15 USER_PALETTE\cf0 \strokec5 .length)];\cb1 \
\cb3                             \}\cb1 \
\cb3                         \});\cb1 \
\cb3                     \});\cb1 \
\cb3                 \} \cf13 \strokec13 else\cf0 \strokec5  \{\cb1 \
\cb3                     slice.forEach((p, x) => \{\cb1 \
\cb3                          p.colors = \cf15 \strokec15 USER_PALETTE\cf0 \strokec5 [x % \cf15 \strokec15 USER_PALETTE\cf0 \strokec5 .length];\cb1 \
\cb3                     \});\cb1 \
\cb3                 \}\cb1 \
\cb3             \});\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf13 \strokec13 function\cf0 \strokec5  updateParticleBlinkSettings() \{\cb1 \
\cb3             particles.forEach(p => \{\cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  group = (p.isFleuron || p.isDecorative);\cb1 \
\cb3                 p.blinkFrequency = group ? largeBeadFrequency : smallBeadFrequency;\cb1 \
\cb3                 p.blinkIntensity = group ? largeBeadIntensity : smallBeadIntensity;\cb1 \
\cb3                 p.glowRadiusFactor = group ? largeBeadGlowRadiusFactor : smallBeadGlowRadiusFactor;\cb1 \
\cb3             \});\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf13 \strokec13 function\cf0 \strokec5  initCloth() \{\cb1 \
\cb3             particles = []; constraints = []; clothSlices = [];\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  paneWidth = \cf15 \strokec15 Math\cf0 \strokec5 .max(\cf14 \strokec14 1\cf0 \strokec5 , parent.clientWidth);\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  paneHeight = \cf15 \strokec15 Math\cf0 \strokec5 .max(\cf14 \strokec14 1\cf0 \strokec5 , parent.clientHeight);\cb1 \
\cb3             canvas.width = paneWidth; canvas.height = paneHeight;\cb1 \
\cb3             glowCanvas.width = paneWidth; glowCanvas.height = paneHeight;\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  \cf15 \strokec15 POINTS_ACROSS\cf0 \strokec5  = \cf15 \strokec15 SIM_POINTS_ACROSS\cf0 \strokec5 , \cf15 \strokec15 STRUCTURAL_POINTS_COUNT\cf0 \strokec5  = \cf15 \strokec15 SIM_POINTS_DOWN_BASE\cf0 \strokec5 ;\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  effectiveWidth = paneWidth - \cf14 \strokec14 2\cf0 \strokec5  * canvasPadding;\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  scaledWidth = effectiveWidth * horizontalGapScale;\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  horizontalSpacing = scaledWidth / \cf15 \strokec15 POINTS_ACROSS\cf0 \strokec5 ;\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  targetFabricLength = (canvas.height - startY) * targetHeightRatio;\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  verticalSpacingBase = targetFabricLength / (\cf15 \strokec15 STRUCTURAL_POINTS_COUNT\cf0 \strokec5  - \cf14 \strokec14 1\cf0 \strokec5 ); \cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  \cf15 \strokec15 USER_PALETTE\cf0 \strokec5  = buildUserColorPalette();\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  grid = customMatrix.grid, gridWidth = customMatrix.width, gridHeight = customMatrix.height;\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  hScaleInt = \cf15 \strokec15 Math\cf0 \strokec5 .max(\cf14 \strokec14 1\cf0 \strokec5 , \cf15 \strokec15 Math\cf0 \strokec5 .floor(\cf15 \strokec15 POINTS_ACROSS\cf0 \strokec5  / gridWidth)); \cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  vScaleRatio = \cf15 \strokec15 STRUCTURAL_POINTS_COUNT\cf0 \strokec5  / gridHeight; \cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  startXPoint = \cf15 \strokec15 Math\cf0 \strokec5 .floor((\cf15 \strokec15 POINTS_ACROSS\cf0 \strokec5  - gridWidth * hScaleInt) / \cf14 \strokec14 2\cf0 \strokec5 );\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  currentStartXPos = canvasPadding + (effectiveWidth - scaledWidth) / \cf14 \strokec14 2\cf0 \strokec5 ;\cb1 \
\cb3             \cf13 \strokec13 let\cf0 \strokec5  cloth = [];\cb1 \
\cb3             \cf13 \strokec13 for\cf0 \strokec5  (\cf13 \strokec13 let\cf0 \strokec5  y = \cf14 \strokec14 0\cf0 \strokec5 ; y < \cf15 \strokec15 STRUCTURAL_POINTS_COUNT\cf0 \strokec5 ; y++) \{ \cb1 \
\cb3                 \cf13 \strokec13 let\cf0 \strokec5  row = [], pY = startY + y * verticalSpacingBase;\cb1 \
\cb3                 \cf13 \strokec13 for\cf0 \strokec5  (\cf13 \strokec13 let\cf0 \strokec5  x = \cf14 \strokec14 0\cf0 \strokec5 ; x <= \cf15 \strokec15 POINTS_ACROSS\cf0 \strokec5 ; x++) \{\cb1 \
\cb3                     \cf13 \strokec13 let\cf0 \strokec5  p = \cf13 \strokec13 new\cf0 \strokec5  \cf15 \strokec15 Point\cf0 \strokec5 (currentStartXPos + x * horizontalSpacing, pY);\cb1 \
\cb3                     p.shapeType = assignRandomShape();\cb1 \
\cb3                     \cf13 \strokec13 let\cf0 \strokec5  shouldBeFleuron = \cf13 \strokec13 false\cf0 \strokec5 ; \cb1 \
\cb3                     \cf13 \strokec13 if\cf0 \strokec5  (x >= startXPoint && x < startXPoint + gridWidth * hScaleInt && y >= \cf14 \strokec14 0\cf0 \strokec5  && y < \cf15 \strokec15 STRUCTURAL_POINTS_COUNT\cf0 \strokec5 ) \{\cb1 \
\cb3                         \cf13 \strokec13 const\cf0 \strokec5  gX = \cf15 \strokec15 Math\cf0 \strokec5 .floor((x - startXPoint) / hScaleInt), gY = \cf15 \strokec15 Math\cf0 \strokec5 .floor(y / vScaleRatio);\cb1 \
\cb3                         \cf13 \strokec13 if\cf0 \strokec5  (gY >= \cf14 \strokec14 0\cf0 \strokec5  && gY < gridHeight && gX >= \cf14 \strokec14 0\cf0 \strokec5  && gX < gridWidth && grid[gY][gX] === \cf14 \strokec14 1\cf0 \strokec5 ) shouldBeFleuron = \cf13 \strokec13 true\cf0 \strokec5 ;\cb1 \
\cb3                     \}\cb1 \
\cb3                     \cf13 \strokec13 if\cf0 \strokec5  (shouldBeFleuron) \{  \cb1 \
\cb3                         p.isFleuron = \cf13 \strokec13 true\cf0 \strokec5 ; p.radius = \cf14 \strokec14 5\cf0 \strokec5 ; p.colors = \cf15 \strokec15 USER_PALETTE\cf0 \strokec5 [(x + \cf15 \strokec15 Math\cf0 \strokec5 .floor(y/\cf14 \strokec14 5\cf0 \strokec5 )) % \cf15 \strokec15 USER_PALETTE\cf0 \strokec5 .length];\cb1 \
\cb3                     \} \cf13 \strokec13 else\cf0 \strokec5  \{\cb1 \
\cb3                         p.radius = \cf14 \strokec14 1\cf0 \strokec5 ; p.colors = \cf15 \strokec15 USER_PALETTE\cf0 \strokec5 [\cf15 \strokec15 Math\cf0 \strokec5 .floor(\cf15 \strokec15 Math\cf0 \strokec5 .random() * \cf15 \strokec15 USER_PALETTE\cf0 \strokec5 .length)];\cb1 \
\cb3                     \}\cb1 \
\cb3                     \cf13 \strokec13 if\cf0 \strokec5  (y === \cf14 \strokec14 0\cf0 \strokec5 ) p.pin(p.x, p.y);\cb1 \
\cb3                     row.push(p); particles.push(p);\cb1 \
\cb3                 \}\cb1 \
\cb3                 cloth.push(row);\cb1 \
\cb3             \}\cb1 \
\cb3             clothSlices.push(cloth); \cb1 \
\cb3             \cf13 \strokec13 for\cf0 \strokec5  (\cf13 \strokec13 let\cf0 \strokec5  y = \cf14 \strokec14 0\cf0 \strokec5 ; y < \cf15 \strokec15 STRUCTURAL_POINTS_COUNT\cf0 \strokec5  - \cf14 \strokec14 1\cf0 \strokec5 ; y++) \{\cb1 \
\cb3                 \cf13 \strokec13 for\cf0 \strokec5  (\cf13 \strokec13 let\cf0 \strokec5  x = \cf14 \strokec14 0\cf0 \strokec5 ; x <= \cf15 \strokec15 POINTS_ACROSS\cf0 \strokec5 ; x++) \{\cb1 \
\cb3                     constraints.push(\cf13 \strokec13 new\cf0 \strokec5  \cf15 \strokec15 Constraint\cf0 \strokec5 (cloth[y][x], cloth[y + \cf14 \strokec14 1\cf0 \strokec5 ][x], verticalSpacingBase * \cf14 \strokec14 0.95\cf0 \strokec5 ));\cb1 \
\cb3                 \}\cb1 \
\cb3             \}\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  decorativeRowPoints = [];\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  reqRadFactor = horizontalSpacing * \cf14 \strokec14 0.2\cf0 \strokec5 ; \cb1 \
\cb3             \cf13 \strokec13 for\cf0 \strokec5  (\cf13 \strokec13 let\cf0 \strokec5  x = \cf14 \strokec14 0\cf0 \strokec5 ; x <= \cf15 \strokec15 POINTS_ACROSS\cf0 \strokec5 ; x++) \{\cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  structuralPoint = cloth[\cf15 \strokec15 STRUCTURAL_POINTS_COUNT\cf0 \strokec5  - \cf14 \strokec14 1\cf0 \strokec5 ][x];\cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  scallopOffset = scallopDepth * (\cf14 \strokec14 0.1\cf0 \strokec5  + \cf15 \strokec15 Math\cf0 \strokec5 .random() * \cf14 \strokec14 0.9\cf0 \strokec5 );\cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  p = \cf13 \strokec13 new\cf0 \strokec5  \cf15 \strokec15 Point\cf0 \strokec5 (structuralPoint.x, structuralPoint.y + scallopOffset);\cb1 \
\cb3                 p.targetY = structuralPoint.y + scallopOffset;\cb1 \
\cb3                 p.sizeFactor = \cf15 \strokec15 Math\cf0 \strokec5 .min(\cf14 \strokec14 1.7\cf0 \strokec5 , \cf15 \strokec15 Math\cf0 \strokec5 .max(\cf14 \strokec14 0.4\cf0 \strokec5 , (\cf14 \strokec14 1.0\cf0 \strokec5  + \cf14 \strokec14 0.3\cf0 \strokec5  * \cf15 \strokec15 Math\cf0 \strokec5 .sin(x / \cf15 \strokec15 POINTS_ACROSS\cf0 \strokec5  * \cf15 \strokec15 Math\cf0 \strokec5 .\cf15 \strokec15 PI\cf0 \strokec5  * \cf14 \strokec14 5\cf0 \strokec5 )) * (\cf14 \strokec14 0.75\cf0 \strokec5  + \cf15 \strokec15 Math\cf0 \strokec5 .random() * \cf14 \strokec14 0.5\cf0 \strokec5 )));\cb1 \
\cb3                 p.isDecorative = \cf13 \strokec13 true\cf0 \strokec5 ; p.shapeType = assignRandomShape();\cb1 \
\cb3                 \cf13 \strokec13 if\cf0 \strokec5  (structuralPoint.isFleuron) \{\cb1 \
\cb3                     p.isFleuron = \cf13 \strokec13 true\cf0 \strokec5 ; p.radius = \cf14 \strokec14 5\cf0 \strokec5 ; p.colors = structuralPoint.colors;\cb1 \
\cb3                 \} \cf13 \strokec13 else\cf0 \strokec5  \{\cb1 \
\cb3                     p.radius = \cf14 \strokec14 1\cf0 \strokec5 ; p.colors = \cf15 \strokec15 USER_PALETTE\cf0 \strokec5 [x % \cf15 \strokec15 USER_PALETTE\cf0 \strokec5 .length];\cb1 \
\cb3                 \}\cb1 \
\cb3                 p.radius *= reqRadFactor;\cb1 \
\cb3                 decorativeRowPoints.push(p); particles.push(p);\cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  combinedR = (structuralPoint.radius * (structuralPoint.isFleuron ? largeBeadScale : smallBeadScale) + p.radius * scallopedBeadScale * p.sizeFactor) * \cf14 \strokec14 0.90\cf0 \strokec5 ;\cb1 \
\cb3                 constraints.push(\cf13 \strokec13 new\cf0 \strokec5  \cf15 \strokec15 Constraint\cf0 \strokec5 (structuralPoint, p, combinedR));\cb1 \
\cb3             \}\cb1 \
\cb3             clothSlices.push(decorativeRowPoints); \cb1 \
\cb3             \cf13 \strokec13 if\cf0 \strokec5  (beadTextureCanvas && isCustomBeadTexture && beadTextureCanvas.image) resizeAndRedrawTextureCanvas(beadTextureCanvas.image);\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf13 \strokec13 function\cf0 \strokec5  update() \{\cb1 \
\cb3             animationTime += \cf14 \strokec14 0.02\cf0 \strokec5 ; \cb1 \
\cb3             \cf13 \strokec13 if\cf0 \strokec5  (isBlinkingEnabled) updateParticleBlinkSettings();\cb1 \
\cb3             particles.forEach(p => p.update(\cf14 \strokec14 0.02\cf0 \strokec5 ));\cb1 \
\cb3             \cf13 \strokec13 for\cf0 \strokec5  (\cf13 \strokec13 let\cf0 \strokec5  i = \cf14 \strokec14 0\cf0 \strokec5 ; i < physicsAccuracy; i++) \{\cb1 \
\cb3                 constraints.forEach(c => c.resolve());\cb1 \
\cb3                 particles.forEach(p => p.resolveConstraints());\cb1 \
\cb3             \}\cb1 \
\cb3             draw(); requestAnimationFrame(update);\cb1 \
\cb3         \}\cb1 \
\cb3         \cb1 \
\cb3         \cf13 \strokec13 function\cf0 \strokec5  draw() \{\cb1 \
\cb3             \cf13 \strokec13 if\cf0 \strokec5  (canvas.width <= \cf14 \strokec14 0\cf0 \strokec5  || canvas.height <= \cf14 \strokec14 0\cf0 \strokec5 ) \cf13 \strokec13 return\cf0 \strokec5 ;\cb1 \
\
\cb3             ctx.clearRect(\cf14 \strokec14 0\cf0 \strokec5 , \cf14 \strokec14 0\cf0 \strokec5 , canvas.width, canvas.height);\cb1 \
\cb3             \cf13 \strokec13 if\cf0 \strokec5  (useGradient) \{\cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  \{ x0, y0, x1, y1 \} = getGradientCoords(gradientAngle);\cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  g = ctx.createLinearGradient(x0, y0, x1, y1);\cb1 \
\cb3                 g.addColorStop(\cf14 \strokec14 0\cf0 \strokec5 , bgColorHex); g.addColorStop(\cf14 \strokec14 1\cf0 \strokec5 , gradientColorHex);\cb1 \
\cb3                 ctx.fillStyle = g; ctx.fillRect(\cf14 \strokec14 0\cf0 \strokec5 , \cf14 \strokec14 0\cf0 \strokec5 , canvas.width, canvas.height);\cb1 \
\cb3             \} \cf13 \strokec13 else\cf0 \strokec5  \{\cb1 \
\cb3                 ctx.fillStyle = bgColorHex; ctx.fillRect(\cf14 \strokec14 0\cf0 \strokec5 , \cf14 \strokec14 0\cf0 \strokec5 , canvas.width, canvas.height);\cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  pCanvas = document.createElement(\cf11 \strokec11 'canvas'\cf0 \strokec5 ); pCanvas.width = \cf14 \strokec14 20\cf0 \strokec5 ; pCanvas.height = \cf14 \strokec14 20\cf0 \strokec5 ;\cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  ptx = pCanvas.getContext(\cf11 \strokec11 '2d'\cf0 \strokec5 ); ptx.strokeStyle = \cf11 \strokec11 '#0000000a'\cf0 \strokec5 ; \cb1 \
\cb3                 ptx.beginPath(); ptx.moveTo(\cf14 \strokec14 0\cf0 \strokec5 , \cf14 \strokec14 0\cf0 \strokec5 ); ptx.lineTo(\cf14 \strokec14 20\cf0 \strokec5 , \cf14 \strokec14 0\cf0 \strokec5 ); ptx.moveTo(\cf14 \strokec14 0\cf0 \strokec5 , \cf14 \strokec14 0\cf0 \strokec5 ); ptx.lineTo(\cf14 \strokec14 0\cf0 \strokec5 , \cf14 \strokec14 20\cf0 \strokec5 ); ptx.stroke();\cb1 \
\cb3                 ctx.fillStyle = ctx.createPattern(pCanvas, \cf11 \strokec11 'repeat'\cf0 \strokec5 ); ctx.fillRect(\cf14 \strokec14 0\cf0 \strokec5 , \cf14 \strokec14 0\cf0 \strokec5 , canvas.width, canvas.height);\cb1 \
\cb3             \}\cb1 \
\
\cb3             \cf13 \strokec13 if\cf0 \strokec5  (isBlinkingEnabled && glowCanvas.width > \cf14 \strokec14 0\cf0 \strokec5  && glowCanvas.height > \cf14 \strokec14 0\cf0 \strokec5 ) \{\cb1 \
\cb3                 glowCtx.globalAlpha = \cf14 \strokec14 1.0\cf0 \strokec5 ; \cb1 \
\cb3                 glowCtx.fillStyle = \cf11 \strokec11 "#00000014"\cf0 \strokec5 ; \cb1 \
\cb3                 glowCtx.fillRect(\cf14 \strokec14 0\cf0 \strokec5 , \cf14 \strokec14 0\cf0 \strokec5 , glowCanvas.width, glowCanvas.height);\cb1 \
\cb3                 clothSlices.forEach((slice, i) => \{\cb1 \
\cb3                     \cf13 \strokec13 if\cf0 \strokec5  (i === \cf14 \strokec14 0\cf0 \strokec5 ) \{\cb1 \
\cb3                         \cf13 \strokec13 for\cf0 \strokec5  (\cf13 \strokec13 let\cf0 \strokec5  y = \cf14 \strokec14 0\cf0 \strokec5 ; y < \cf15 \strokec15 SIM_POINTS_DOWN_BASE\cf0 \strokec5 ; y++) \{\cb1 \
\cb3                             \cf13 \strokec13 for\cf0 \strokec5  (\cf13 \strokec13 let\cf0 \strokec5  x = \cf14 \strokec14 0\cf0 \strokec5 ; x <= \cf15 \strokec15 SIM_POINTS_ACROSS\cf0 \strokec5 ; x++) drawShape(slice[y][x], slice[y][x].colors, slice[y][x].shapeType, \cf13 \strokec13 false\cf0 \strokec5 , glowCtx, \cf13 \strokec13 true\cf0 \strokec5 );\cb1 \
\cb3                         \}\cb1 \
\cb3                     \} \cf13 \strokec13 else\cf0 \strokec5  slice.forEach(p => drawShape(p, p.colors, p.shapeType, \cf13 \strokec13 true\cf0 \strokec5 , glowCtx, \cf13 \strokec13 true\cf0 \strokec5 ));\cb1 \
\cb3                 \});\cb1 \
\cb3                 ctx.globalCompositeOperation = \cf11 \strokec11 'lighter'\cf0 \strokec5 ; \cb1 \
\cb3                 ctx.drawImage(glowCanvas, \cf14 \strokec14 0\cf0 \strokec5 , \cf14 \strokec14 0\cf0 \strokec5 ); \cb1 \
\cb3                 ctx.globalCompositeOperation = \cf11 \strokec11 'source-over'\cf0 \strokec5 ;\cb1 \
\cb3             \}\cb1 \
\
\cb3             ctx.beginPath(); ctx.moveTo(\cf14 \strokec14 0\cf0 \strokec5 , startY - rodOffset); ctx.lineTo(canvas.width, startY - rodOffset);\cb1 \
\cb3             ctx.lineWidth = \cf14 \strokec14 4\cf0 \strokec5 ; ctx.strokeStyle = \cf11 \strokec11 '#cbd5e1'\cf0 \strokec5 ; ctx.stroke();\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  wireColors = getShades(unbeadedDotColorHex);\cb1 \
\cb3             ctx.lineWidth = \cf14 \strokec14 0.5\cf0 \strokec5 ; ctx.strokeStyle = wireColors.light;\cb1 \
\cb3             \cb1 \
\cb3             \cf13 \strokec13 if\cf0 \strokec5  (clothSlices.length >= \cf14 \strokec14 1\cf0 \strokec5 ) \{\cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  main = clothSlices[\cf14 \strokec14 0\cf0 \strokec5 ], deco = clothSlices[\cf14 \strokec14 1\cf0 \strokec5 ];\cb1 \
\cb3                 \cf13 \strokec13 for\cf0 \strokec5  (\cf13 \strokec13 let\cf0 \strokec5  x = \cf14 \strokec14 0\cf0 \strokec5 ; x <= \cf15 \strokec15 SIM_POINTS_ACROSS\cf0 \strokec5 ; x++) \{\cb1 \
\cb3                     ctx.beginPath(); ctx.moveTo(main[\cf14 \strokec14 0\cf0 \strokec5 ][x].x, main[\cf14 \strokec14 0\cf0 \strokec5 ][x].y);\cb1 \
\cb3                     \cf13 \strokec13 for\cf0 \strokec5  (\cf13 \strokec13 let\cf0 \strokec5  y = \cf14 \strokec14 1\cf0 \strokec5 ; y < \cf15 \strokec15 SIM_POINTS_DOWN_BASE\cf0 \strokec5 ; y++) ctx.lineTo(main[y][x].x, main[y][x].y);\cb1 \
\cb3                     \cf13 \strokec13 if\cf0 \strokec5  (deco && deco[x]) ctx.lineTo(deco[x].x, deco[x].y);\cb1 \
\cb3                     ctx.stroke();\cb1 \
\cb3                 \}\cb1 \
\
\cb3                 clothSlices.forEach((slice, i) => \{\cb1 \
\cb3                     \cf13 \strokec13 if\cf0 \strokec5  (i === \cf14 \strokec14 0\cf0 \strokec5 ) \{\cb1 \
\cb3                         \cf13 \strokec13 for\cf0 \strokec5  (\cf13 \strokec13 let\cf0 \strokec5  y = \cf14 \strokec14 0\cf0 \strokec5 ; y < \cf15 \strokec15 SIM_POINTS_DOWN_BASE\cf0 \strokec5 ; y++) \{\cb1 \
\cb3                             \cf13 \strokec13 for\cf0 \strokec5  (\cf13 \strokec13 let\cf0 \strokec5  x = \cf14 \strokec14 0\cf0 \strokec5 ; x <= \cf15 \strokec15 SIM_POINTS_ACROSS\cf0 \strokec5 ; x++) drawShape(slice[y][x], slice[y][x].colors, slice[y][x].shapeType, \cf13 \strokec13 false\cf0 \strokec5 , ctx, \cf13 \strokec13 false\cf0 \strokec5 );\cb1 \
\cb3                         \}\cb1 \
\cb3                     \} \cf13 \strokec13 else\cf0 \strokec5  slice.forEach(p => drawShape(p, p.colors, p.shapeType, \cf13 \strokec13 true\cf0 \strokec5 , ctx, \cf13 \strokec13 false\cf0 \strokec5 ));\cb1 \
\cb3                 \});\cb1 \
\
\cb3                 ctx.fillStyle = \cf11 \strokec11 '#94a3b8'\cf0 \strokec5 ;\cb1 \
\cb3                 main[\cf14 \strokec14 0\cf0 \strokec5 ].forEach(p => \{\cb1 \
\cb3                     ctx.beginPath(); ctx.arc(p.x, p.y - rodOffset/\cf14 \strokec14 2\cf0 \strokec5 , \cf14 \strokec14 2\cf0 \strokec5 , \cf14 \strokec14 0\cf0 \strokec5 , \cf15 \strokec15 Math\cf0 \strokec5 .\cf15 \strokec15 PI\cf0 \strokec5  * \cf14 \strokec14 2\cf0 \strokec5 ); ctx.fill();\cb1 \
\cb3                 \});\cb1 \
\cb3             \}\cb1 \
\
\cb3             \cf13 \strokec13 if\cf0 \strokec5  (mouse.down) \{\cb1 \
\cb3                 ctx.fillStyle = \cf11 \strokec11 '#0000000a'\cf0 \strokec5 ; \cb1 \
\cb3                 ctx.beginPath(); ctx.arc(mouse.x, mouse.y, mouseInfluenceSize, \cf14 \strokec14 0\cf0 \strokec5 , \cf15 \strokec15 Math\cf0 \strokec5 .\cf15 \strokec15 PI\cf0 \strokec5  * \cf14 \strokec14 2\cf0 \strokec5 ); ctx.fill();\cb1 \
\cb3             \}\cb1 \
\cb3         \}\cb1 \
\cb3         \cb1 \
\cb3         \cf13 \strokec13 function\cf0 \strokec5  parseMatrixInput(text) \{\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  lines = text.trim().split(\cf11 \strokec11 '\\n'\cf0 \strokec5 );\cb1 \
\cb3             \cf13 \strokec13 let\cf0 \strokec5  matrix = [], maxWidth = \cf14 \strokec14 0\cf0 \strokec5 ;\cb1 \
\cb3             \cf13 \strokec13 for\cf0 \strokec5  (\cf13 \strokec13 const\cf0 \strokec5  line \cf13 \strokec13 of\cf0 \strokec5  lines) \{\cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  row = line.trim().split(\cf11 \strokec11 ''\cf0 \strokec5 ).filter(c => c === \cf11 \strokec11 '0'\cf0 \strokec5  || c === \cf11 \strokec11 '1'\cf0 \strokec5 ).map(\cf15 \strokec15 Number\cf0 \strokec5 );\cb1 \
\cb3                 \cf13 \strokec13 if\cf0 \strokec5  (row.length > \cf14 \strokec14 0\cf0 \strokec5 ) \{ matrix.push(row); maxWidth = \cf15 \strokec15 Math\cf0 \strokec5 .max(maxWidth, row.length); \}\cb1 \
\cb3             \}\cb1 \
\cb3             matrix = matrix.map(row => \{ \cf13 \strokec13 while\cf0 \strokec5  (row.length < maxWidth) row.push(\cf14 \strokec14 0\cf0 \strokec5 ); \cf13 \strokec13 return\cf0 \strokec5  row; \});\cb1 \
\cb3             \cf13 \strokec13 if\cf0 \strokec5  (matrix.length === \cf14 \strokec14 0\cf0 \strokec5 ) \cf13 \strokec13 return\cf0 \strokec5  \{ grid: [[\cf14 \strokec14 1\cf0 \strokec5 ]], width: \cf14 \strokec14 1\cf0 \strokec5 , height: \cf14 \strokec14 1\cf0 \strokec5  \};\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  grid = matrix.slice(\cf14 \strokec14 0\cf0 \strokec5 , \cf14 \strokec14 40\cf0 \strokec5 ).map(r => r.slice(\cf14 \strokec14 0\cf0 \strokec5 , \cf14 \strokec14 40\cf0 \strokec5 ));\cb1 \
\cb3             \cf13 \strokec13 return\cf0 \strokec5  \{ grid, width: grid[\cf14 \strokec14 0\cf0 \strokec5 ].length, height: grid.length \};\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf13 \strokec13 function\cf0 \strokec5  handleLoadMatrix() \{\cb1 \
\cb3             customMatrix = parseMatrixInput(matrixInput.value);\cb1 \
\cb3             \cf15 \strokec15 SIM_POINTS_DOWN_BASE\cf0 \strokec5  = \cf15 \strokec15 Math\cf0 \strokec5 .min(\cf14 \strokec14 200\cf0 \strokec5 , \cf15 \strokec15 Math\cf0 \strokec5 .max(\cf14 \strokec14 20\cf0 \strokec5 , parseInt(pointsDownInput.value, \cf14 \strokec14 10\cf0 \strokec5 )));\cb1 \
\cb3             \cf15 \strokec15 SIM_POINTS_ACROSS\cf0 \strokec5  = \cf15 \strokec15 Math\cf0 \strokec5 .min(\cf14 \strokec14 200\cf0 \strokec5 , \cf15 \strokec15 Math\cf0 \strokec5 .max(\cf14 \strokec14 50\cf0 \strokec5 , parseInt(pointsAcrossInput.value, \cf14 \strokec14 10\cf0 \strokec5 )));\cb1 \
\cb3             horizontalGapScale = parseFloat(horizontalGapScaleInput.value);\cb1 \
\cb3             scallopDepth = parseInt(scallopDepthInput.value, \cf14 \strokec14 10\cf0 \strokec5 );\cb1 \
\cb3             initCloth();\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf13 \strokec13 function\cf0 \strokec5  resizeAndRedrawTextureCanvas(image) \{\cb1 \
\cb3             \cf13 \strokec13 if\cf0 \strokec5  (!image) \cf13 \strokec13 return\cf0 \strokec5 ;\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  vW = (canvas.width - \cf14 \strokec14 2\cf0 \strokec5  * canvasPadding) * horizontalGapScale, vH = canvas.height - startY;\cb1 \
\cb3             \cf13 \strokec13 if\cf0 \strokec5  (vW <= \cf14 \strokec14 0\cf0 \strokec5  || vH <= \cf14 \strokec14 0\cf0 \strokec5 ) \cf13 \strokec13 return\cf0 \strokec5 ;\cb1 \
\cb3             \cf13 \strokec13 if\cf0 \strokec5  (!beadTextureCanvas) \{ beadTextureCanvas = document.createElement(\cf11 \strokec11 'canvas'\cf0 \strokec5 ); beadTextureCanvas.image = image; \}\cb1 \
\cb3             beadTextureCanvas.width = vW; beadTextureCanvas.height = vH;\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  tCtx = beadTextureCanvas.getContext(\cf11 \strokec11 '2d'\cf0 \strokec5 ), r = \cf15 \strokec15 Math\cf0 \strokec5 .max(vW / image.naturalWidth, vH / image.naturalHeight);\cb1 \
\cb3             tCtx.drawImage(image, (vW - image.naturalWidth * r)/\cf14 \strokec14 2\cf0 \strokec5 , (vH - image.naturalHeight * r)/\cf14 \strokec14 2\cf0 \strokec5 , image.naturalWidth * r, image.naturalHeight * r);\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf13 \strokec13 function\cf0 \strokec5  loadBeadTexture(input) \{\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  file = input.files[\cf14 \strokec14 0\cf0 \strokec5 ];\cb1 \
\cb3             \cf13 \strokec13 if\cf0 \strokec5  (!file) \cf13 \strokec13 return\cf0 \strokec5 ;\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  reader = \cf13 \strokec13 new\cf0 \strokec5  \cf15 \strokec15 FileReader\cf0 \strokec5 ();\cb1 \
\cb3             reader.onload = e => \{\cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  img = \cf13 \strokec13 new\cf0 \strokec5  \cf15 \strokec15 Image\cf0 \strokec5 ();\cb1 \
\cb3                 img.crossOrigin = \cf11 \strokec11 "anonymous"\cf0 \strokec5 ; \cf9 \strokec9 // Fix for GitHub/Canvas security\cf0 \cb1 \strokec5 \
\cb3                 img.onload = () => \{ resizeAndRedrawTextureCanvas(img); isCustomBeadTexture = \cf13 \strokec13 true\cf0 \strokec5 ; \};\cb1 \
\cb3                 img.src = e.target.result;\cb1 \
\cb3             \};\cb1 \
\cb3             reader.readAsDataURL(file);\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf13 \strokec13 function\cf0 \strokec5  startRecording() \{\cb1 \
\cb3             \cf13 \strokec13 const\cf0 \strokec5  stream = canvas.captureStream(\cf14 \strokec14 60\cf0 \strokec5 ); recordedChunks = [];\cb1 \
\cb3             mediaRecorder = \cf13 \strokec13 new\cf0 \strokec5  \cf15 \strokec15 MediaRecorder\cf0 \strokec5 (stream, \{ mimeType: \cf11 \strokec11 'video/webm; codecs=vp9'\cf0 \strokec5  \});\cb1 \
\cb3             mediaRecorder.ondataavailable = e => \{ \cf13 \strokec13 if\cf0 \strokec5  (e.data.size > \cf14 \strokec14 0\cf0 \strokec5 ) recordedChunks.push(e.data); \};\cb1 \
\cb3             mediaRecorder.onstop = () => \{\cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  url = \cf15 \strokec15 URL\cf0 \strokec5 .createObjectURL(\cf13 \strokec13 new\cf0 \strokec5  \cf15 \strokec15 Blob\cf0 \strokec5 (recordedChunks, \{ type: \cf11 \strokec11 'video/webm'\cf0 \strokec5  \}));\cb1 \
\cb3                 \cf13 \strokec13 const\cf0 \strokec5  a = document.createElement(\cf11 \strokec11 'a'\cf0 \strokec5 ); a.href = url; a.download = \cf11 \strokec11 `curtain_\cf0 \strokec5 $\{\cf15 \strokec15 Date\cf0 \strokec5 .now()\}\cf11 \strokec11 .webm`\cf0 \strokec5 ; a.click();\cb1 \
\cb3             \};\cb1 \
\cb3             mediaRecorder.start(); recordStartButton.disabled = \cf13 \strokec13 true\cf0 \strokec5 ; recordStopButton.disabled = \cf13 \strokec13 false\cf0 \strokec5 ;\cb1 \
\cb3         \}\cb1 \
\
\cb3         \cf13 \strokec13 function\cf0 \strokec5  stopRecording() \{ mediaRecorder.stop(); recordStartButton.disabled = \cf13 \strokec13 false\cf0 \strokec5 ; recordStopButton.disabled = \cf13 \strokec13 true\cf0 \strokec5 ; \}\cb1 \
\cb3         \cb1 \
\cb3         window.onload = () => \{\cb1 \
\cb3             canvas = document.getElementById(\cf11 \strokec11 'clothCanvas'\cf0 \strokec5 ); ctx = canvas.getContext(\cf11 \strokec11 '2d'\cf0 \strokec5 ); parent = document.getElementById(\cf11 \strokec11 'middle-pane'\cf0 \strokec5 );\cb1 \
\cb3             glowCanvas = document.createElement(\cf11 \strokec11 'canvas'\cf0 \strokec5 ); glowCtx = glowCanvas.getContext(\cf11 \strokec11 '2d'\cf0 \strokec5 );\cb1 \
\cb3             matrixInput = document.getElementById(\cf11 \strokec11 'matrixInput'\cf0 \strokec5 ); pointsDownInput = document.getElementById(\cf11 \strokec11 'pointsDownInput'\cf0 \strokec5 );\cb1 \
\cb3             pointsAcrossInput = document.getElementById(\cf11 \strokec11 'pointsAcrossInput'\cf0 \strokec5 ); horizontalGapScaleInput = document.getElementById(\cf11 \strokec11 'horizontalGapScale'\cf0 \strokec5 );\cb1 \
\cb3             smallBeadScaleInput = document.getElementById(\cf11 \strokec11 'smallBeadScale'\cf0 \strokec5 ); largeBeadScaleInput = document.getElementById(\cf11 \strokec11 'largeBeadScale'\cf0 \strokec5 );\cb1 \
\cb3             scallopedBeadScaleInput = document.getElementById(\cf11 \strokec11 'scallopedBeadScale'\cf0 \strokec5 ); unbeadedDotColorInput = document.getElementById(\cf11 \strokec11 'unbeadedDotColor'\cf0 \strokec5 );\cb1 \
\cb3             bgColorInput = document.getElementById(\cf11 \strokec11 'bgColor'\cf0 \strokec5 ); gradientColorInput = document.getElementById(\cf11 \strokec11 'gradientColor'\cf0 \strokec5 );\cb1 \
\cb3             gradientToggleInput = document.getElementById(\cf11 \strokec11 'gradientToggle'\cf0 \strokec5 ); gradientAngleInput = document.getElementById(\cf11 \strokec11 'gradientAngle'\cf0 \strokec5 );\cb1 \
\cb3             blinkToggleInput = document.getElementById(\cf11 \strokec11 'blinkToggle'\cf0 \strokec5 ); scallopDepthInput = document.getElementById(\cf11 \strokec11 'scallopDepthInput'\cf0 \strokec5 );\cb1 \
\cb3             windowContainerElement = document.getElementById(\cf11 \strokec11 'window-container'\cf0 \strokec5 ); \cb1 \
\cb3             recordStartButton = document.getElementById(\cf11 \strokec11 'recordStartButton'\cf0 \strokec5 ); recordStopButton = document.getElementById(\cf11 \strokec11 'recordStopButton'\cf0 \strokec5 );\cb1 \
\
\cb3             smallBeadScaleInput.addEventListener(\cf11 \strokec11 'input'\cf0 \strokec5 , e => \{ smallBeadScale = parseFloat(e.target.value); document.getElementById(\cf11 \strokec11 'smallBeadScaleValue'\cf0 \strokec5 ).textContent = \cf11 \strokec11 `\cf0 \strokec5 $\{smallBeadScale.toFixed(\cf14 \strokec14 1\cf0 \strokec5 )\}\cf11 \strokec11 x`\cf0 \strokec5 ; \});\cb1 \
\cb3             largeBeadScaleInput.addEventListener(\cf11 \strokec11 'input'\cf0 \strokec5 , e => \{ largeBeadScale = parseFloat(e.target.value); document.getElementById(\cf11 \strokec11 'largeBeadScaleValue'\cf0 \strokec5 ).textContent = \cf11 \strokec11 `\cf0 \strokec5 $\{largeBeadScale.toFixed(\cf14 \strokec14 1\cf0 \strokec5 )\}\cf11 \strokec11 x`\cf0 \strokec5 ; \});\cb1 \
\cb3             scallopedBeadScaleInput.addEventListener(\cf11 \strokec11 'input'\cf0 \strokec5 , e => \{ scallopedBeadScale = parseFloat(e.target.value); document.getElementById(\cf11 \strokec11 'scallopedBeadScaleValue'\cf0 \strokec5 ).textContent = \cf11 \strokec11 `\cf0 \strokec5 $\{scallopedBeadScale.toFixed(\cf14 \strokec14 1\cf0 \strokec5 )\}\cf11 \strokec11 x`\cf0 \strokec5 ; \});\cb1 \
\cb3             scallopDepthInput.addEventListener(\cf11 \strokec11 'input'\cf0 \strokec5 , e => \{ scallopDepth = parseInt(e.target.value, \cf14 \strokec14 10\cf0 \strokec5 ); document.getElementById(\cf11 \strokec11 'scallopDepthValue'\cf0 \strokec5 ).textContent = \cf11 \strokec11 `\cf0 \strokec5 $\{scallopDepth\}\cf11 \strokec11  px`\cf0 \strokec5 ; handleLoadMatrix(); \});\cb1 \
\cb3             horizontalGapScaleInput.addEventListener(\cf11 \strokec11 'input'\cf0 \strokec5 , e => \{ horizontalGapScale = parseFloat(e.target.value); document.getElementById(\cf11 \strokec11 'horizontalGapValue'\cf0 \strokec5 ).textContent = \cf11 \strokec11 `\cf0 \strokec5 $\{horizontalGapScale.toFixed(\cf14 \strokec14 2\cf0 \strokec5 )\}\cf11 \strokec11 x`\cf0 \strokec5 ; handleLoadMatrix(); \cf13 \strokec13 if\cf0 \strokec5  (beadTextureCanvas && beadTextureCanvas.image) resizeAndRedrawTextureCanvas(beadTextureCanvas.image); \});\cb1 \
\cb3             pointsDownInput.addEventListener(\cf11 \strokec11 'change'\cf0 \strokec5 , handleLoadMatrix); pointsAcrossInput.addEventListener(\cf11 \strokec11 'change'\cf0 \strokec5 , handleLoadMatrix);\cb1 \
\cb3             \cb1 \
\cb3             blinkToggleInput.addEventListener(\cf11 \strokec11 'change'\cf0 \strokec5 , e => isBlinkingEnabled = e.target.checked);\cb1 \
\cb3             \cb1 \
\cb3             document.getElementById(\cf11 \strokec11 'beadTextureUpload'\cf0 \strokec5 ).addEventListener(\cf11 \strokec11 'change'\cf0 \strokec5 , e => loadBeadTexture(e.target));\cb1 \
\cb3             document.getElementById(\cf11 \strokec11 'generateMatrixButton'\cf0 \strokec5 ).addEventListener(\cf11 \strokec11 'click'\cf0 \strokec5 , handleLoadMatrix);\cb1 \
\cb3             unbeadedDotColorInput.addEventListener(\cf11 \strokec11 'input'\cf0 \strokec5 , e => unbeadedDotColorHex = e.target.value);\cb1 \
\cb3             bgColorInput.addEventListener(\cf11 \strokec11 'input'\cf0 \strokec5 , e => \{ bgColorHex = e.target.value; \});\cb1 \
\cb3             gradientColorInput.addEventListener(\cf11 \strokec11 'input'\cf0 \strokec5 , e => \{ gradientColorHex = e.target.value; \});\cb1 \
\cb3             gradientToggleInput.addEventListener(\cf11 \strokec11 'change'\cf0 \strokec5 , e => \{ useGradient = e.target.checked; \});\cb1 \
\cb3             gradientAngleInput.addEventListener(\cf11 \strokec11 'input'\cf0 \strokec5 , e => \{ gradientAngle = parseInt(e.target.value, \cf14 \strokec14 10\cf0 \strokec5 ); document.getElementById(\cf11 \strokec11 'gradientAngleValue'\cf0 \strokec5 ).textContent = \cf11 \strokec11 `\cf0 \strokec5 $\{gradientAngle\}\cf11 \strokec11 \'b0`\cf0 \strokec5 ; \});\cb1 \
\cb3             document.getElementById(\cf11 \strokec11 'primaryBeadColor1'\cf0 \strokec5 ).addEventListener(\cf11 \strokec11 'input'\cf0 \strokec5 , e => \{ primaryBeadColor1 = e.target.value; updateParticleVisualsOnly(); \});\cb1 \
\cb3             document.getElementById(\cf11 \strokec11 'primaryBeadColor2'\cf0 \strokec5 ).addEventListener(\cf11 \strokec11 'input'\cf0 \strokec5 , e => \{ primaryBeadColor2 = e.target.value; updateParticleVisualsOnly(); \});\cb1 \
\cb3             document.getElementById(\cf11 \strokec11 'primaryBeadColor3'\cf0 \strokec5 ).addEventListener(\cf11 \strokec11 'input'\cf0 \strokec5 , e => \{ primaryBeadColor3 = e.target.value; updateParticleVisualsOnly(); \});\cb1 \
\cb3             document.getElementById(\cf11 \strokec11 'primaryBeadColor4'\cf0 \strokec5 ).addEventListener(\cf11 \strokec11 'input'\cf0 \strokec5 , e => \{ primaryBeadColor4 = e.target.value; updateParticleVisualsOnly(); \});\cb1 \
\
\cb3             canvas.addEventListener(\cf11 \strokec11 'mousedown'\cf0 \strokec5 , e => \{ mouse.down = \cf13 \strokec13 true\cf0 \strokec5 ; \cf13 \strokec13 const\cf0 \strokec5  c = getCanvasRelativeCoords(e.clientX, e.clientY); mouse.x = c.x; mouse.y = c.y; mouse.px = c.x; mouse.py = c.y; canvas.style.cursor = \cf11 \strokec11 'grabbing'\cf0 \strokec5 ; \});\cb1 \
\cb3             window.addEventListener(\cf11 \strokec11 'mouseup'\cf0 \strokec5 , () => \{ mouse.down = \cf13 \strokec13 false\cf0 \strokec5 ; canvas.style.cursor = \cf11 \strokec11 'grab'\cf0 \strokec5 ; \});\cb1 \
\cb3             canvas.addEventListener(\cf11 \strokec11 'mousemove'\cf0 \strokec5 , e => \{ mouse.px = mouse.x; mouse.py = mouse.y; \cf13 \strokec13 const\cf0 \strokec5  c = getCanvasRelativeCoords(e.clientX, e.clientY); mouse.x = c.x; mouse.y = c.y; \});\cb1 \
\cb3             canvas.addEventListener(\cf11 \strokec11 'touchstart'\cf0 \strokec5 , e => \{ e.preventDefault(); \cf13 \strokec13 const\cf0 \strokec5  t = e.touches[\cf14 \strokec14 0\cf0 \strokec5 ]; \cf13 \strokec13 const\cf0 \strokec5  c = getCanvasRelativeCoords(t.clientX, t.clientY); mouse.down = \cf13 \strokec13 true\cf0 \strokec5 ; mouse.x = c.x; mouse.y = c.y; mouse.px = c.x; mouse.py = c.y; canvas.style.cursor = \cf11 \strokec11 'grabbing'\cf0 \strokec5 ; \}, \{ passive: \cf13 \strokec13 false\cf0 \strokec5  \});\cb1 \
\cb3             canvas.addEventListener(\cf11 \strokec11 'touchmove'\cf0 \strokec5 , e => \{ e.preventDefault(); \cf13 \strokec13 const\cf0 \strokec5  t = e.touches[\cf14 \strokec14 0\cf0 \strokec5 ]; mouse.px = mouse.x; mouse.py = mouse.y; \cf13 \strokec13 const\cf0 \strokec5  c = getCanvasRelativeCoords(t.clientX, t.clientY); mouse.x = c.x; mouse.y = c.y; \});\cb1 \
\cb3             canvas.addEventListener(\cf11 \strokec11 'touchend'\cf0 \strokec5 , () => \{ mouse.down = \cf13 \strokec13 false\cf0 \strokec5 ; canvas.style.cursor = \cf11 \strokec11 'grab'\cf0 \strokec5 ; \});\cb1 \
\cb3             recordStartButton.addEventListener(\cf11 \strokec11 'click'\cf0 \strokec5 , startRecording); recordStopButton.addEventListener(\cf11 \strokec11 'click'\cf0 \strokec5 , stopRecording);\cb1 \
\cb3             window.addEventListener(\cf11 \strokec11 'resize'\cf0 \strokec5 , handleLoadMatrix);\cb1 \
\cb3             \cb1 \
\cb3             handleLoadMatrix(); \cb1 \
\cb3             update();\cb1 \
\cb3         \};\cb1 \
\cb3     \cf6 \strokec6 </\cf7 \strokec7 script\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 </\cf7 \strokec7 body\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cf6 \cb3 \strokec6 </\cf7 \strokec7 html\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
}